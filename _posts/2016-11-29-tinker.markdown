---
layout: post
title:  "Tinker"
date:   2016-11-29 12:55 +0800
categories: Ma Lin update
---

1.DownLoad
`git clone git@github.com:Tencent/tinker.git`

2.cd sample project
`cd tinker/tinker-sample-android`

3.DownLoad dependencies
`gradle clean`

4.build debug apk
`gradle assembleDebug`

5.cd directory of base debug apk
`cd tinker/tinker-sample-android/app/build/bakApk`

6.install debug base apk
`adb install app-debug-1129-11-29-42.apk`

7.start debug base apk
`adb shell am start tinker.sample.android/.app.MainActivity`

8.change some codes and change the config of build.gradle
`cd tinker/tinker-sample-android/app/`
`cat build.gradle | grep tinkerOldApkPath`
`vim tinker/tinker-sample-android/app/buid.gradle`


9.build patch apk
`gradle tinkerPatchDebug`

10.cd directory of patch apk
`cd tinker/tinker-sample-android/app/build/outputs/tinkerPatch/debug`

11.push patch apk into phone
`adb push patch_signed_7zip.apk /storage/sdcard0/`

12.kill the running apk or restart the running apk
`adb shell am force-stop tinker.sample.android`

or

`PROID=`adb shell ps | grep tinker.sample.android | awk '{print $2}' | head -n 1``
`adb shell kill -9 $PROID`

13.start apk
`adb shell am start tinker.sample.android/.app.MainActivity`

14.test patch success or not
`pidcat.py tinker.sample.android -t Tinker.MainActivity`
