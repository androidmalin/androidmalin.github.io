<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="进阶之路相信美好的事件即将发生">
<meta property="og:type" content="website">
<meta property="og:title" content="马琳">
<meta property="og:url" content="https://www.malin.xyz/index.html">
<meta property="og:site_name" content="马琳">
<meta property="og:description" content="进阶之路相信美好的事件即将发生">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="马琳">
<meta name="twitter:description" content="进阶之路相信美好的事件即将发生">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://www.malin.xyz/"/>





  <title>马琳</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">马琳</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">简单，美好，奋发</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.malin.xyz/2018/11/12/kde-ubuntu/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马琳">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="马琳">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/12/kde-ubuntu/" itemprop="url">KDE Connect Indicator</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-11-12T16:53:00+08:00">
                2018-11-12
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/12/kde-ubuntu/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/11/12/kde-ubuntu/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>1.indicator-kdeconnect</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:webupd8team/indicator-kdeconnect</span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt install  indicator-kdeconnect</span><br></pre></td></tr></table></figure>
<p>2.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install python-nautilus</span><br><span class="line">sudo apt install python-nemo</span><br><span class="line">sudo apt install python-caja</span><br></pre></td></tr></table></figure></p>
<p>1c6063510bfbc364</p>
<p><a href="https://github.com/Bajoja/indicator-kdeconnect" target="_blank" rel="noopener">indicator-kdeconnect</a></p>
<p>3.电脑发送文件到手机<br><code>kdeconnect-send %F aa.img</code></p>
<p>mkdir -p /run/user/1000/xxxxxxxxxxxxxxxx<br>sudo mount -v -t fuse.sshfs \<br>  -o rw,nosuid,nodev,uid=1000,gid=1000 \<br>  <a href="mailto:kdeconnect@10.31.4.43" target="_blank" rel="noopener">kdeconnect@10.31.4.43</a>:/ /home/malin/kdeconnect</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.malin.xyz/2018/11/12/busybox/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马琳">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="马琳">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/12/busybox/" itemprop="url">BusyBox</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-11-12T09:59:00+08:00">
                2018-11-12
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/12/busybox/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/11/12/busybox/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>0.下载源码解压.<br><code>tar -jxvf xx.tar.bz2</code><br>1.<code>sudo apt-get install gcc-arm-linux-gnueabi</code></p>
<p>2.<code>export ARCH=arm</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Makefile:152</span><br><span class="line"># Another way is to have ARCH set in the environment.</span><br><span class="line"># The default ARCH is the host where make is executed</span><br></pre></td></tr></table></figure>
<p>3.<code>export CROSS_COMPILE=arm-linux-gnueabi-</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Makefile:160</span><br><span class="line"># Alternatively CROSS_COMPILE can be set in the environment.</span><br><span class="line"># Default value for CROSS_COMPILE is not to prefix executables</span><br></pre></td></tr></table></figure>
<p>4.<code>make menuconfig</code> (if you dont get a config menu, you need to <code>sudo apt-get install libncurses5-dev</code>)</p>
<p>Busybox Settings –&gt; — Build Options –&gt; Build static binary (no shared libs) -  点击空格键</p>
<p>Busybox Settings –&gt; Installation Options –&gt; Don’t use /usr  -   点击空格键</p>
<p>5.<code>make -j8</code></p>
<p>6.<code>readelf -h busybox</code><br>编译完成后会生成busybox可执行文件，输入以下命令可以查看生成的文件信息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">readelf -h busybox</span><br><span class="line">ELF Header:</span><br><span class="line">  Magic:   7f 45 4c 46 01 01 01 00 00 00 00 00 00 00 00 00</span><br><span class="line">  Class:                             ELF32</span><br><span class="line">  Data:                              2&apos;s complement, little endian</span><br><span class="line">  Version:                           1 (current)</span><br><span class="line">  OS/ABI:                            UNIX - System V</span><br><span class="line">  ABI Version:                       0</span><br><span class="line">  Type:                              EXEC (Executable file)</span><br><span class="line">  Machine:                           ARM</span><br><span class="line">  Version:                           0x1</span><br><span class="line">  Entry point address:               0x14110</span><br><span class="line">  Start of program headers:          52 (bytes into file)</span><br><span class="line">  Start of section headers:          2085504 (bytes into file)</span><br><span class="line">  Flags:                             0x5000200, Version5 EABI, soft-float ABI</span><br><span class="line">  Size of this header:               52 (bytes)</span><br><span class="line">  Size of program headers:           32 (bytes)</span><br><span class="line">  Number of program headers:         7</span><br><span class="line">  Size of section headers:           40 (bytes)</span><br><span class="line">  Number of section headers:         27</span><br><span class="line">  Section header string table index: 26</span><br></pre></td></tr></table></figure>
<p>Machine: ARM ==&gt;说明为ARM架构</p>
<p>7.<br>修改/system目录可写<br><code>mount -o remount,rw /system</code></p>
<p>复制 busybox 文件到 /system/xbin，并为其分配“可执行”的权限</p>
<p><code>cd /system/xbin</code><br><code>chmod 755 busybox</code></p>
<p>8.这时就可以使用 busybox 的命令了，例如以前没有清屏的clear命令，现在只需输入 busybox clear 就可以实现清屏功能，使用完整版的 ls 只需输入 busybox ls 。<br>但是每次前面都加上个busybox太麻烦了，所以我们还要继续完成安装。<br><code>cd /system/xbin</code><br><code>busybox --install .</code></p>
<p>9.</p>
<p>修改init.rc<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">修改init.rc文件可写</span><br><span class="line">`mount -o remount,rw /`</span><br><span class="line"></span><br><span class="line">修改 service console /system/bin/sh 这行为                                                   </span><br><span class="line">==&gt;</span><br><span class="line">改为:service console /system/xbin/sh</span><br></pre></td></tr></table></figure></p>
<p>查看当前的环境变量.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">angler:/ # busybox echo $PATH</span><br><span class="line">/sbin:/system/sbin:/system/bin:/system/xbin:/vendor/bin:/vendor/xbin</span><br></pre></td></tr></table></figure></p>
<p>然后在当前的PATH前加上busybox的路径,加上后为:(删除重复的/system/xbin)<br><code>/system/xbin:/sbin:/system/sbin:/system/bin:/vendor/bin:/vendor/xbin</code></p>
<p>要提醒的是, 修改PATH环境变量的时候, 应该把busybox常用命令的路径”/data/busybox/bin”放在Android的常用命令路径”/system/bin”的前面, 否则, 先查找得到的将不是busybox的命令,  可以这样设置:</p>
<p>最终为<br><code>export PATH=/system/xbin:/sbin:/system/sbin:/system/bin:/vendor/bin:/vendor/xbin</code><br>或者<br><code>export PATH=/system/xbin:$PATH</code>(里面有重复的/system/xbin)<br>这样设置的是本地有效，一旦你退出当前环境．需要重新设置PATH.</p>
<p>通过这个查看环境变量<br><code>busybox echo $PATH</code></p>
<p>每次退出shell环境重新进入.需要再次设置一次环境变量.</p>
<p>参考文章<br><a href="https://blog.csdn.net/a345017062/article/details/6250619" target="_blank" rel="noopener">Android自带的toolbox分析及扩展</a><br><a href="https://forum.xda-developers.com/android/development/guide-cross-compiling-c-c-arm-linux-t2999323" target="_blank" rel="noopener">Cross Compiling C/C++ for ARM on Linux</a><br><a href="https://blog.csdn.net/hexingen/article/details/76736708" target="_blank" rel="noopener">Android安装系统App(adb push实现)</a><br><a href="https://android.stackexchange.com/questions/60446/cant-remount-system-in-rw" target="_blank" rel="noopener">remount-system-in-rw</a><br><a href="https://www.cnblogs.com/xiaowenji/archive/2011/03/12/1982309.html" target="_blank" rel="noopener">为Android安装BusyBox —— 完整的bash shell</a><br><a href="https://www.cnblogs.com/shangdawei/p/4514315.html" target="_blank" rel="noopener">采用busybox 代替android 自带的shell</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.malin.xyz/2018/10/08/androidx/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马琳">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="马琳">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/10/08/androidx/" itemprop="url">AndroidX,migrate,jetifier</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-10-08T21:13:00+08:00">
                2018-10-08
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/10/08/androidx/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/10/08/androidx/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>一次读完如下的文章,可以明白AndroidX的由来,如何迁移,以及迁移中关于对第三库依赖的解决方法.</p>
<p>1.<a href="https://developer.android.com/jetpack/androidx/" target="_blank" rel="noopener">AndroidX Overview</a></p>
<p>2.<a href="https://www.jianshu.com/p/164a4272b61b" target="_blank" rel="noopener">Hello World, AndroidX</a></p>
<p>3.<a href="https://android-developers.googleblog.com/2018/05/hello-world-androidx.html" target="_blank" rel="noopener">hello-world-androidx</a></p>
<p>4.<a href="https://developer.android.com/jetpack/androidx/migrate" target="_blank" rel="noopener">Migrating to AndroidX</a></p>
<p>5.<a href="http://www.akexorcist.com/2018/07/android-jetifier-binary-migration-tool.html" target="_blank" rel="noopener">android-jetifier-binary-migration-tool</a></p>
<p>一篇很好的文章.讲解Jetifier的,是泰语,可以用chrome网页自带的翻译,翻译成汉语.<br>概况的说,它是一个gradle的插件,它将项目中依赖的第三方库,如果这个库依赖了support包的话,它会在gradle 编译项目期间,将依赖转为androidx对应的依赖.</p>
<p>6.<a href="https://stackoverflow.com/questions/51680671/what-is-jetifier" target="_blank" rel="noopener">what-is-jetifier</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.malin.xyz/2018/08/18/android-source/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马琳">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="马琳">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/18/android-source/" itemprop="url">Source for Android 28</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-18T17:58:00+08:00">
                2018-08-18
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/08/18/android-source/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/08/18/android-source/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#1. Source for Android 28<br>android SDK Platform -&gt; Android API 28 -&gt; Source for Android 28 这个源码位置在<br><a href="https://android.googlesource.com/platform/frameworks/base/+refs" target="_blank" rel="noopener">frameworks/base</a>下的<a href="https://android.googlesource.com/platform/frameworks/base/+/sdk-release" target="_blank" rel="noopener">sdk-release</a>分支.</p>
<p>#2. <a href="https://gist.github.com/cketti/71475220a08c9ee43fd48ecaaf7046a5" target="_blank" rel="noopener">Build your own android-28 sources</a><br>Build “Sources for Android 28” so you can comfortably browse the Android API source in Android Studio.</p>
<ol>
<li>Collect source files</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mkdir android-sdk-source-build</span><br><span class="line">cd android-sdk-source-build</span><br><span class="line"></span><br><span class="line">mkdir -p frameworks/base</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Fetch repositories that contain the sources we<span class="string">'re interested in</span></span></span><br><span class="line">git clone --depth 1 https://android.googlesource.com/platform/frameworks/base -b android-9.0.0_r3 frameworks/base</span><br><span class="line">git clone --depth 1 https://android.googlesource.com/platform/libcore -b android-9.0.0_r3</span><br><span class="line">git clone --depth 1 https://android.googlesource.com/platform/development -b android-9.0.0_r3</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Create a basic source.properties file</span></span><br><span class="line">echo -e "Pkg.UserSrc=false\nPkg.Revision=1\nAndroidVersion.ApiLevel=28" &gt; source.properties</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Modify the script to create a sources ZIP to use <span class="string">"android-28"</span> as top-level directory</span></span><br><span class="line">cat development/build/tools/mk_sources_zip.py | sed -e 's/TOP_FOLDER = .*/TOP_FOLDER = "android-28"/' &gt; my_mk_sources_zip.py</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Run the script to create android-28-sources.zip</span></span><br><span class="line">python my_mk_sources_zip.py -z source.properties android-28-sources.zip .</span><br></pre></td></tr></table></figure>
<ol start="2">
<li><p>Extract into Android SDK source directory</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unzip android-28-sources.zip -d $&#123;ANDROID_HOME&#125;/sources</span><br></pre></td></tr></table></figure>
</li>
<li><p>Restart Android Studio and SDK sources should show up.</p>
</li>
</ol>
<p>说明:android-9.0.0_r3是一个tag.<br>指定 tag 代码<br><code>git checkout -b demobranch demotag</code></p>
<p>#3.<br>第一次使用<br>Sync成功后，所有的git库都处于 no branch状态，不能进行操作<br>需要初化分支<br>Repo start master –all</p>
<p>#4. 对tag的理解</p>
<p><a href="https://stackoverflow.com/questions/35979642/how-to-checkout-remote-git-tag/35981459" target="_blank" rel="noopener">how-to-checkout-remote-git-tag</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">A tag is used to label and mark a specific commit in the history.</span><br><span class="line">It is usually used to mark release points (eg. v1.0, etc.).</span><br><span class="line"></span><br><span class="line">Although a tag may appear similar to branch, a tag, however, does not change.</span><br><span class="line">It points directly to a specific commit in the history.</span><br></pre></td></tr></table></figure>
<p>#5. repo如何取消本地改动（How to discard changes using repo）<br><code>repo forall -vc &quot;git reset --hard&quot;</code><br>如果执行完成后，依旧提示某个目录有改动，则切换到有问题的目录，继续执行<br><code>git reset --hard</code></p>
<p><a href="https://stackoverflow.com/a/18096819/3326683" target="_blank" rel="noopener">how-to-discard-changes-using-repo</a></p>
<p>#6. android studio 打开AOSP源码<br>官方文档<br><a href="https://android.googlesource.com/platform/development/+/android-9.0.0_r3/tools/idegen/README" target="_blank" rel="noopener">development/tools/idegen</a></p>
<p>#7. android 27<br>sdk <code>Source for Android 27</code> 中包含<br><code>/home/malin/sdk/sources/android-27/android/arch/lifecycle/LifecycleRuntimeTrojanProvider.java</code><br>这个很奇怪.按道理应该是手动引入的依赖.现在却放在了<code>Source for Android 27</code>中了.<br>如果手动引入这个类对应的依赖.可以覆盖.<br>因为这个类的名字<code>特洛伊木马</code>会被杀毒软件检测出来,认为是病毒.新版已经将名字修改了.</p>
<p><a href="https://github.com/aosp-mirror/platform_frameworks_support/commit/566dbfd4b16f43685d4bdc835b1b862883b94d96" target="_blank" rel="noopener">Remove LifecycleDispatcher &amp; Rename LifecycleRuntimeTrojanProvider</a></p>
<p><code>cd /onet/malin/android_source/frameworks/support</code><br><code>git log --all | grep -C 10 &quot;Remove&quot; | grep -C 10 LifecycleDispatcher | grep -C 10 566dbfd4b16f43685d4bdc835b1b862883b94d96</code></p>
<p>#8. ubuntu18.04 编译android-8.1.0_r43, 编译aosp_angler-userdebug<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">35 warnings generated.</span><br><span class="line">[  4% 4298/89666] Lex: applypatch &lt;= bootable/recovery/edify/lexer.ll</span><br><span class="line">FAILED: out/target/product/angler/obj/STATIC_LIBRARIES/libedify_intermediates/lexer.cpp</span><br><span class="line">/bin/bash -c &quot;prebuilts/misc/linux-x86/flex/flex-2.5.39 -oout/target/product/angler/obj/STATIC_LIBRARIES/libedify_intermediates/lexer.cpp bootable/recovery/edify/lexer.ll&quot;</span><br><span class="line">flex-2.5.39: loadlocale.c:130:_nl_intern_locale_data: ?? &apos;cnt &lt; (sizeof (_nl_value_type_LC_TIME) / sizeof (_nl_value_type_LC_TIME[0]))&apos; ???</span><br><span class="line">Aborted (core dumped)</span><br><span class="line">[  4% 4305/89666] target StaticLib: libv8src (out/target/product/angler/obj/STATIC_LIBRARIES/libv8src_intermediates/libv8src.a)</span><br><span class="line">ninja: build stopped: subcommand failed.</span><br><span class="line">15:00:53 ninja failed with: exit status 1</span><br><span class="line"></span><br><span class="line">#### failed to build some targets (07:19 (mm:ss)) ####</span><br><span class="line"></span><br><span class="line">malin@malin:/onet/malin/android_source$ export LC_ALL=C</span><br></pre></td></tr></table></figure></p>
<p>解决办法<br><code>export LC_ALL=C</code><br><a href="https://www.reddit.com/r/LineageOS/comments/8v2pjc/building_with_ubuntu_1804/" target="_blank" rel="noopener">building_with_ubuntu_1804</a><br><a href="https://stackoverflow.com/questions/51324238/aosp-build-stopped-subcommand-failed" target="_blank" rel="noopener">aosp-build-stopped-subcommand-failed</a><br><a href="https://stackoverflow.com/questions/49301627/android-7-1-2-armv7" target="_blank" rel="noopener">android-7-1-2-armv7</a></p>
<p>#9. aosp编译完占用的空间.<br>android-8.1.0_r43, 编译aosp_angler-userdebug 完成. 占用192G空间.</p>
<p>#10</p>
<p>找到对应tag的名称<br><a href="https://source.android.com/setup/start/build-numbers?hl=en#platform-code-names-versions-api-levels-and-ndk-releases" target="_blank" rel="noopener">platform-code-names-versions-api-levels-and-ndk-releases</a><br><code>OPM6.171019.030.H1    android-8.1.0_r43    Nexus 5X and Nexus 6P</code></p>
<p>驱动下载<br><a href="https://developers.google.com/android/drivers#angler" target="_blank" rel="noopener">drivers#angler</a><br><code>Nexus 6P binaries for Android 8.1.0 (OPM6.171019.030.H1)</code></p>
<p>ota<br><a href="https://developers.google.com/android/ota" target="_blank" rel="noopener">ota</a><br><code>&quot;angler&quot; for Nexus 6P</code><br><code>(OPM6.171019.030.H1, Aug 2018)</code></p>
<p><a href="https://source.android.com/setup/build/running?hl=en" target="_blank" rel="noopener">running</a><br>Nexus 6P    angler    aosp_angler-userdebug</p>
<p><a href="https://source.android.com/setup/build/jack" target="_blank" rel="noopener">build/jack</a><br><code>Jack 是一种 Android 工具链，用于将 Java 源代码编译成 Android dex 字节码。要使用 Jack，您只需使用标准的 Makefile 命令来编译源代码树或您的项目即可，无需进行任何其他操作。Android 8.1 是使用 Jack 的最后一个版本</code></p>
<p><a href="https://source.android.com/setup/build/building" target="_blank" rel="noopener">开始编译包括驱动</a><br><a href="https://source.android.com/setup/build/running" target="_blank" rel="noopener">刷机</a></p>
<p><a href="https://blog.csdn.net/u012417380/article/details/73196722" target="_blank" rel="noopener">Android系统源码编译及刷机实战</a><br><a href="https://blog.csdn.net/u012417380/article/details/72843185" target="_blank" rel="noopener">NEXUS 5 工厂镜像刷机教程及刷机包目录解析</a><br><a href="https://tuzhao.org/article/40" target="_blank" rel="noopener">android源码编译7.1.2 for Nexus 6P手机</a><br><a href="https://tuzhao.org/article/44" target="_blank" rel="noopener">android源码编译8.1.0 for Nexus 6P手机</a><br><a href="https://www.reddit.com/r/LineageOS/comments/8v2pjc/building_with_ubuntu_1804/" target="_blank" rel="noopener">building_with_ubuntu_1804</a></p>
<p>#11 repo切换分支</p>
<p><code>repo init -b android-8.1.0_r43</code><br><code>sync</code><br><code>repo start android-8.1.0_r43 --all</code></p>
<p>#12 compile<br><code>export LC_ALL=C</code><br><code>make clean</code><br><code>make clobber</code><br><code>vim device/huawei/angler/vendorsetup.sh</code><br>增加<code>add_lunch_combo aosp_angler-eng</code></p>
<p><code>source build/envsetup.sh</code><br><code>make -j8</code></p>
<p>#13 Android Studio 断点源码<br>不用先make 完整编译,只需要编译idegen模块即可<br>1.<code>make idegen</code><br>2.<code>./development/tools/idegen/idegen.sh</code><br>3.修改编译好的android.imi,增加不需要的文件夹.<br><code>cat development/tools/idegen/README</code><br>4.修改android studio的参数.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">If you&apos;re using IntelliJ...</span><br><span class="line"></span><br><span class="line">    If this is your first time using IDEGen...</span><br><span class="line"></span><br><span class="line">        Android is large, thus IDEA needs a lot of memory. Add &quot;-Xms1g -Xmx5g&quot; to</span><br><span class="line">        your VM options in &quot;Help &gt; Edit Custom VM&quot; and increase the</span><br><span class="line">        file size limit in &quot;Help -&gt; Edit custom properties&quot; by adding</span><br><span class="line">        &quot;idea.max.intellisense.filesize=100000&quot;. Make sure to restart the IDE for</span><br><span class="line">        the new settings to take effect.</span><br><span class="line"></span><br><span class="line">        Create a JDK configuration named &quot;1.8 (No Libraries)&quot; by adding a new</span><br><span class="line">        JDK like you normally would and then removing all of the jar entries</span><br><span class="line">        under the &quot;Classpath&quot; tab. This will ensure that you only get access to</span><br><span class="line">        Android&apos;s core libraries and not those from your desktop VM.</span><br><span class="line"></span><br><span class="line">    From the project&apos;s root directory...</span><br><span class="line"></span><br><span class="line">        Repeat these steps after each sync...</span><br><span class="line"></span><br><span class="line">        1) make (to produce generated .java source)</span><br><span class="line">        2) development/tools/idegen/idegen.sh</span><br><span class="line">        3) Open android.ipr in IntelliJ. If you already have the project open,</span><br><span class="line">           hit the sync button in IntelliJ, and it will automatically detect the</span><br><span class="line">           updated configuration.</span><br><span class="line"></span><br><span class="line">        If you get unexpected compilation errors from IntelliJ, try running</span><br><span class="line">        &quot;Build -&gt; Rebuild Project&quot;. Sometimes IntelliJ gets confused after the</span><br><span class="line">        project changes significantly.</span><br></pre></td></tr></table></figure></p>
<p>#14 gdb命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">List of classes of commands:</span><br><span class="line"></span><br><span class="line">aliases -- Aliases of other commands</span><br><span class="line">breakpoints -- Making program stop at certain points</span><br><span class="line">data -- Examining data</span><br><span class="line">files -- Specifying and examining files</span><br><span class="line">internals -- Maintenance commands</span><br><span class="line">obscure -- Obscure features</span><br><span class="line">running -- Running the program</span><br><span class="line">stack -- Examining the stack</span><br><span class="line">status -- Status inquiries</span><br><span class="line">support -- Support facilities</span><br><span class="line">tracepoints -- Tracing of program execution without stopping the program</span><br><span class="line">user-defined -- User-defined commands</span><br><span class="line"></span><br><span class="line">Type &quot;help&quot; followed by a class name for a list of commands in that class.</span><br><span class="line">Type &quot;help all&quot; for the list of all commands.</span><br><span class="line">Type &quot;help&quot; followed by command name for full documentation.</span><br><span class="line">Type &quot;apropos word&quot; to search for commands related to &quot;word&quot;.</span><br><span class="line">Command name abbreviations are allowed if unambiguous.</span><br></pre></td></tr></table></figure></p>
<p>#15 gdb 调试</p>
<p>1.编译<code>aosp_angler-eng</code>到nexus6p手机中.</p>
<p>2.查看要调试的应用进程<br><code>adb shell ps | grep malin</code> 例如得到的是<br><code>u0_a63        7807   921 4315356  58780 SyS_epoll_wait 753e1f83f8 S com.malin.nativeframework</code><br>应用进程为<code>7807</code></p>
<p>设置环境变量<br><code>source  build/envsetup.sh</code><br><code>lunch aosp_angler-eng</code><br><code>command -v gdbclient.py</code></p>
<p>3.使用GDB调试应用<br><code>gdbclient 7807</code><br><a href="https://source.android.com/devices/tech/debug/gdb" target="_blank" rel="noopener">此脚本会设置端口转发，在设备上启动相应的 gdbserver，在主机上启动相应的 gdb，配置 gdb 以找出符号，然后将 gdb 连接到远程 gdbserver</a></p>
<p>4.进入gdb后,<br><code>info sharedlibrary</code><br>查看so库的加载路径是否正确可使用info sharedlibrary命令，如果已找到对应的文件则其From和To的加载地址会有值，<br>并且右边路径显示的就是加载文件所在的地址，这个时候，如果so库文件含符号信息，则syms Read的值为Yes，否则为No，<br>如果未找到对应的文件则From和To的地址为空，syms Read的值为No，此时右边路径显示的是Coredump文件中库文件路径。<br><a href="https://blog.csdn.net/_xiao/article/details/23289971" target="_blank" rel="noopener">GDB动态库搜索路径</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(gdb) info sharedlibrary</span><br><span class="line">From                To                  Syms Read   Shared Object Library</span><br><span class="line">0x000000753f265640  0x000000753f320e74  Yes         /onet/malin/android_source/out/target/product/angler/symbols/system/bin/linker64</span><br><span class="line">0x000000753d538cc8  0x000000753d630b1c  Yes         /onet/malin/android_source/out/target/product/angler/symbols/system/lib64/libandroid_runtime.so</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p>
<p>5.进入gdb后,设置断点文件的目录<br><code>dir source 指定源码路径</code><br><code>dir /onet/malin/android_source/system/core/libutils</code></p>
<p>6.进入gdb后,查看要断点的文件的行数<br><code>list file:filenum       显示文件file中的filenum行</code><br><code>list Looper.cpp:67</code><br><code>list android_os_MessageQueue.cpp:190</code></p>
<p>7.进入gdb后,给文件具体行数设置断点.<br><code>b Looper.cpp:67</code><br><code>b Looper.cpp:68</code><br><code>b android_os_MessageQueue.cpp:190</code><br><code>b android_os_MessageQueue.cpp:191</code></p>
<p>列出设置的断点<br><code>info breakpoints</code></p>
<p>8.操作应用程序,触发断点.</p>
<p>9.程序在运行到断点的地方停止.</p>
<p>10.在终端gdb,输入<code>c</code>,然后回车继续.</p>
<p>11.在终端gdb,输入<code>c</code>,然后回车继续.</p>
<p>12.在终端gdb,输入<code>bt</code>,查看方法调用栈.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">(gdb) bt</span><br><span class="line">#0  android::android_os_MessageQueue_nativePollOnce (env=0x74ba6cb1c0, obj=&lt;optimized out&gt;, ptr=501344133568, timeoutMillis=&lt;optimized out&gt;) at frameworks/base/core/jni/android_os_MessageQueue.cpp:192</span><br><span class="line">#1  0x00000000727d2830 in android.app.NativeActivity.onWindowFocusChangedNative [DEDUPED] () from /onet/malin/android_source/out/target/product/angler/symbols/system/framework/arm64/boot-framework.oat</span><br><span class="line">#2  0x00000074ba4f0b8c in art_quick_invoke_stub () at art/runtime/arch/arm64/quick_entrypoints_arm64.S:1697</span><br><span class="line">#3  0x00000074ba082598 in art::ArtMethod::Invoke (this=0x7110fcc8, self=0x74ba6bea00, args=0x7ff682ca5c, args_size=16, result=0x7ff682cc20, shorty=0x74b8850213 &quot;VJI&quot;) at art/runtime/art_method.cc:367</span><br><span class="line">#4  0x00000074ba2414a0 in art::interpreter::ArtInterpreterToCompiledCodeBridge (self=0x74ba6bea00, caller=&lt;optimized out&gt;, shadow_frame=&lt;optimized out&gt;, arg_offset=&lt;optimized out&gt;, result=0x7ff682cc20)</span><br><span class="line">    at art/runtime/interpreter/interpreter_common.cc:516</span><br><span class="line">#5  0x00000074ba23ba94 in art::PerformCall (self=0x74ba6bea00, caller_method=&lt;optimized out&gt;, first_dest_reg=&lt;optimized out&gt;, result=0x7ff682cc20, code_item=&lt;optimized out&gt;, callee_frame=&lt;optimized out&gt;,</span><br><span class="line">    use_interpreter_entrypoint=&lt;optimized out&gt;) at art/runtime/common_dex_operations.h:56</span><br><span class="line">#6  art::interpreter::DoCallCommon&lt;false, false&gt; (called_method=&lt;optimized out&gt;, self=&lt;optimized out&gt;, shadow_frame=..., result=&lt;optimized out&gt;, number_of_inputs=&lt;optimized out&gt;, arg=..., vregC=&lt;optimized out&gt;)</span><br><span class="line">    at art/runtime/interpreter/interpreter_common.cc:1124</span><br><span class="line">#7  art::interpreter::DoCall&lt;false, false&gt; (called_method=&lt;optimized out&gt;, self=0x74ba6bea00, shadow_frame=..., inst=&lt;optimized out&gt;, inst_data=&lt;optimized out&gt;, result=0x7ff682cc20)</span><br><span class="line">    at art/runtime/interpreter/interpreter_common.cc:1157</span><br><span class="line">#8  0x00000074ba4d9d6c in art::interpreter::DoFastInvoke&lt;(art::InvokeType)1&gt; (self=0x74ba6bea00, shadow_frame=..., result=0x7ff682cc20, inst=&lt;optimized out&gt;, inst_data=&lt;optimized out&gt;)</span><br><span class="line">    at art/runtime/interpreter/interpreter_common.h:156</span><br><span class="line">#9  MterpInvokeDirect (self=0x74ba6bea00, shadow_frame=0x7ff682cd20, dex_pc_ptr=0x74b869d316, inst_data=16496) at art/runtime/interpreter/mterp/mterp.cc:194</span><br><span class="line">#10 0x00000074ba4e2a18 in artMterpAsmInstructionStart () at art/runtime/interpreter/mterp/out/mterp_arm64.S:2998</span><br><span class="line">#11 0x00000074ba21bc04 in art::interpreter::Execute (self=0x74ba6bea00, code_item=0x74b869d2dc, shadow_frame=..., result_register=..., stay_in_interpreter=&lt;optimized out&gt;) at art/runtime/interpreter/interpreter.cc:314</span><br><span class="line">#12 0x00000074ba2217d0 in art::interpreter::ArtInterpreterToInterpreterBridge (self=0x74ba6bea00, code_item=0x74b869d2dc, shadow_frame=0x7ff682cd20, result=0x7ff682cfa0) at art/runtime/interpreter/interpreter.cc:632</span><br><span class="line">#13 0x00000074ba23ba74 in art::PerformCall (self=&lt;optimized out&gt;, caller_method=&lt;optimized out&gt;, first_dest_reg=&lt;optimized out&gt;, result=&lt;optimized out&gt;, code_item=&lt;optimized out&gt;, callee_frame=&lt;optimized out&gt;,</span><br><span class="line">    use_interpreter_entrypoint=&lt;optimized out&gt;) at art/runtime/common_dex_operations.h:54</span><br><span class="line">#14 art::interpreter::DoCallCommon&lt;false, false&gt; (called_method=&lt;optimized out&gt;, self=&lt;optimized out&gt;, shadow_frame=..., result=&lt;optimized out&gt;, number_of_inputs=&lt;optimized out&gt;, arg=..., vregC=&lt;optimized out&gt;)</span><br><span class="line">    at art/runtime/interpreter/interpreter_common.cc:1124</span><br><span class="line">#15 art::interpreter::DoCall&lt;false, false&gt; (called_method=&lt;optimized out&gt;, self=0x74ba6bea00, shadow_frame=..., inst=&lt;optimized out&gt;, inst_data=&lt;optimized out&gt;, result=0x7ff682cfa0)</span><br><span class="line">    at art/runtime/interpreter/interpreter_common.cc:1157</span><br><span class="line">#16 0x00000074ba4d8adc in art::interpreter::DoFastInvoke&lt;(art::InvokeType)2&gt; (self=0x74ba6bea00, shadow_frame=..., result=0x7ff682cfa0, inst=&lt;optimized out&gt;, inst_data=&lt;optimized out&gt;)</span><br><span class="line">    at art/runtime/interpreter/interpreter_common.h:156</span><br><span class="line">#17 MterpInvokeVirtual (self=0x74ba6bea00, shadow_frame=0x7ff682d0a0, dex_pc_ptr=0x74b869b3c0, inst_data=4206) at art/runtime/interpreter/mterp/mterp.cc:161</span><br><span class="line">#18 0x00000074ba4e2918 in artMterpAsmInstructionStart () at art/runtime/interpreter/mterp/out/mterp_arm64.S:2932</span><br><span class="line">#19 0x00000074ba21bc04 in art::interpreter::Execute (self=0x74ba6bea00, code_item=0x74b869b380, shadow_frame=..., result_register=..., stay_in_interpreter=&lt;optimized out&gt;) at art/runtime/interpreter/interpreter.cc:314</span><br><span class="line">#20 0x00000074ba2217d0 in art::interpreter::ArtInterpreterToInterpreterBridge (self=0x74ba6bea00, code_item=0x74b869b380, shadow_frame=0x7ff682d0a0, result=0x7ff682d330) at art/runtime/interpreter/interpreter.cc:632</span><br><span class="line">#21 0x00000074ba23ba74 in art::PerformCall (self=&lt;optimized out&gt;, caller_method=&lt;optimized out&gt;, first_dest_reg=&lt;optimized out&gt;, result=&lt;optimized out&gt;, code_item=&lt;optimized out&gt;, callee_frame=&lt;optimized out&gt;,</span><br><span class="line">    use_interpreter_entrypoint=&lt;optimized out&gt;) at art/runtime/common_dex_operations.h:54</span><br><span class="line">#22 art::interpreter::DoCallCommon&lt;false, false&gt; (called_method=&lt;optimized out&gt;, self=&lt;optimized out&gt;, shadow_frame=..., result=&lt;optimized out&gt;, number_of_inputs=&lt;optimized out&gt;, arg=..., vregC=&lt;optimized out&gt;)</span><br><span class="line">    at art/runtime/interpreter/interpreter_common.cc:1124</span><br><span class="line">#23 art::interpreter::DoCall&lt;false, false&gt; (called_method=&lt;optimized out&gt;, self=0x74ba6bea00, shadow_frame=..., inst=&lt;optimized out&gt;, inst_data=&lt;optimized out&gt;, result=0x7ff682d330)</span><br><span class="line">    at art/runtime/interpreter/interpreter_common.cc:1157</span><br><span class="line">#24 0x00000074ba4d9f54 in art::interpreter::DoFastInvoke&lt;(art::InvokeType)0&gt; (self=0x74ba6bea00, shadow_frame=..., result=0x7ff682d330, inst=&lt;optimized out&gt;, inst_data=&lt;optimized out&gt;)</span><br><span class="line">    at art/runtime/interpreter/interpreter_common.h:156</span><br><span class="line">#25 MterpInvokeStatic (self=0x74ba6bea00, shadow_frame=0x7ff682d3b0, dex_pc_ptr=0x74b8337caa, inst_data=113) at art/runtime/interpreter/mterp/mterp.cc:205</span><br><span class="line">#26 0x00000074ba4e2a98 in artMterpAsmInstructionStart () at art/runtime/interpreter/mterp/out/mterp_arm64.S:3024</span><br><span class="line">#27 0x00000074ba21bc04 in art::interpreter::Execute (self=0x74ba6bea00, code_item=0x74b8337c18, shadow_frame=..., result_register=..., stay_in_interpreter=&lt;optimized out&gt;) at art/runtime/interpreter/interpreter.cc:314</span><br><span class="line">#28 0x00000074ba4cb454 in artQuickToInterpreterBridge (method=&lt;optimized out&gt;, self=0x74ba6bea00, sp=0x7ff682d550) at art/runtime/entrypoints/quick/quick_trampoline_entrypoints.cc:806</span><br><span class="line">#29 0x00000074ba4f9d10 in art_quick_to_interpreter_bridge () at art/runtime/arch/arm64/quick_entrypoints_arm64.S:2518</span><br><span class="line">#30 0x00000074ba4f0e50 in art_quick_invoke_static_stub () at art/runtime/arch/arm64/quick_entrypoints_arm64.S:1814</span><br><span class="line">#31 0x00000074ba0825d4 in art::ArtMethod::Invoke (this=0x710f99c8, self=0x74ba6bea00, args=0x7ff682d8f8, args_size=4, result=0x7ff682d8c8, shorty=0x74b885046c &quot;VL&quot;) at art/runtime/art_method.cc:369</span><br><span class="line">#32 0x00000074ba414dcc in art::InvokeWithArgArray (soa=..., method=0x710f99c8, arg_array=&lt;optimized out&gt;, result=&lt;optimized out&gt;, shorty=&lt;optimized out&gt;) at art/runtime/reflection.cc:454</span><br><span class="line">#33 0x00000074ba416970 in art::InvokeMethod (soa=..., javaMethod=&lt;optimized out&gt;, javaReceiver=&lt;optimized out&gt;, javaArgs=&lt;optimized out&gt;, num_frames=&lt;optimized out&gt;) at art/runtime/reflection.cc:667</span><br><span class="line">#34 0x00000074ba39a188 in art::Method_invoke (env=&lt;optimized out&gt;, javaMethod=0x14843840, javaReceiver=0x0, javaArgs=0x74ba6bea00) at art/runtime/native/java_lang_reflect_Method.cc:87</span><br><span class="line">#35 0x00000000714faf38 in java.lang.Class.getDeclaredMethodInternal [DEDUPED] () from /onet/malin/android_source/out/target/product/angler/symbols/system/framework/arm64/boot.oat</span><br><span class="line">#36 0x00000074ba4f0b8c in art_quick_invoke_stub () at art/runtime/arch/arm64/quick_entrypoints_arm64.S:1697</span><br><span class="line">#37 0x00000074ba082598 in art::ArtMethod::Invoke (this=0x709f67f0, self=0x74ba6bea00, args=0x7ff682dccc, args_size=12, result=0x7ff682de90, shorty=0x74b9e0c9a3 &quot;LLL&quot;) at art/runtime/art_method.cc:367</span><br><span class="line">#38 0x00000074ba2414a0 in art::interpreter::ArtInterpreterToCompiledCodeBridge (self=0x74ba6bea00, caller=&lt;optimized out&gt;, shadow_frame=&lt;optimized out&gt;, arg_offset=&lt;optimized out&gt;, result=0x7ff682de90)</span><br><span class="line">    at art/runtime/interpreter/interpreter_common.cc:516</span><br><span class="line">#39 0x00000074ba23ba94 in art::PerformCall (self=0x74ba6bea00, caller_method=&lt;optimized out&gt;, first_dest_reg=&lt;optimized out&gt;, result=0x7ff682de90, code_item=&lt;optimized out&gt;, callee_frame=&lt;optimized out&gt;,</span><br><span class="line">    use_interpreter_entrypoint=&lt;optimized out&gt;) at art/runtime/common_dex_operations.h:56</span><br><span class="line">#40 art::interpreter::DoCallCommon&lt;false, false&gt; (called_method=&lt;optimized out&gt;, self=&lt;optimized out&gt;, shadow_frame=..., result=&lt;optimized out&gt;, number_of_inputs=&lt;optimized out&gt;, arg=..., vregC=&lt;optimized out&gt;)</span><br><span class="line">    at art/runtime/interpreter/interpreter_common.cc:1124</span><br><span class="line">#41 art::interpreter::DoCall&lt;false, false&gt; (called_method=&lt;optimized out&gt;, self=0x74ba6bea00, shadow_frame=..., inst=&lt;optimized out&gt;, inst_data=&lt;optimized out&gt;, result=0x7ff682de90)</span><br><span class="line">    at art/runtime/interpreter/interpreter_common.cc:1157</span><br><span class="line">#42 0x00000074ba4d8adc in art::interpreter::DoFastInvoke&lt;(art::InvokeType)2&gt; (self=0x74ba6bea00, shadow_frame=..., result=0x7ff682de90, inst=&lt;optimized out&gt;, inst_data=&lt;optimized out&gt;)</span><br><span class="line">    at art/runtime/interpreter/interpreter_common.h:156</span><br><span class="line">#43 MterpInvokeVirtual (self=0x74ba6bea00, shadow_frame=0x7ff682df10, dex_pc_ptr=0x74b8f402ea, inst_data=12398) at art/runtime/interpreter/mterp/mterp.cc:161</span><br><span class="line">---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---</span><br><span class="line">#44 0x00000074ba4e2918 in artMterpAsmInstructionStart () at art/runtime/interpreter/mterp/out/mterp_arm64.S:2932</span><br><span class="line">#45 0x00000074ba21bc04 in art::interpreter::Execute (self=0x74ba6bea00, code_item=0x74b8f402c4, shadow_frame=..., result_register=..., stay_in_interpreter=&lt;optimized out&gt;) at art/runtime/interpreter/interpreter.cc:314</span><br><span class="line">#46 0x00000074ba4cb454 in artQuickToInterpreterBridge (method=&lt;optimized out&gt;, self=0x74ba6bea00, sp=0x7ff682e0a0) at art/runtime/entrypoints/quick/quick_trampoline_entrypoints.cc:806</span><br><span class="line">#47 0x00000074ba4f9d10 in art_quick_to_interpreter_bridge () at art/runtime/arch/arm64/quick_entrypoints_arm64.S:2518</span><br><span class="line">#48 0x00000000736318e8 in com.android.internal.os.ZygoteInit.main () from /onet/malin/android_source/out/target/product/angler/symbols/system/framework/arm64/boot-framework.oat</span><br><span class="line">#49 0x00000074ba4f0e50 in art_quick_invoke_static_stub () at art/runtime/arch/arm64/quick_entrypoints_arm64.S:1814</span><br><span class="line">#50 0x00000074ba0825d4 in art::ArtMethod::Invoke (this=0x7110ac50, self=0x74ba6bea00, args=0x7ff682e4a0, args_size=4, result=0x7ff682e480, shorty=0x74b9124816 &quot;VL&quot;) at art/runtime/art_method.cc:369</span><br><span class="line">#51 0x00000074ba414dcc in art::InvokeWithArgArray (soa=..., method=0x7110ac50, arg_array=&lt;optimized out&gt;, result=&lt;optimized out&gt;, shorty=&lt;optimized out&gt;) at art/runtime/reflection.cc:454</span><br><span class="line">#52 0x00000074ba4149f0 in art::InvokeWithVarArgs (soa=..., obj=0x0, mid=&lt;optimized out&gt;, args=...) at art/runtime/reflection.cc:481</span><br><span class="line">#53 0x00000074ba31b42c in art::JNI::CallStaticVoidMethodV (env=&lt;optimized out&gt;, mid=0x7110ac50, args=...) at art/runtime/jni_internal.cc:1731</span><br><span class="line">#54 0x00000074ba0b6a90 in art::CheckJNI::CallMethodV (function_name=0x74ba518fe4 &quot;CallStaticVoidMethodV&quot;, env=0x74ba6cb1c0, obj=0x0, c=0x69, mid=0x7110ac50, vargs=..., type=&lt;optimized out&gt;, invoke=&lt;optimized out&gt;)</span><br><span class="line">    at art/runtime/check_jni.cc:3248</span><br><span class="line">#55 0x00000074ba0a70e4 in art::CheckJNI::CallStaticVoidMethodV (env=&lt;optimized out&gt;, c=&lt;optimized out&gt;, mid=0x7ff682e480, vargs=...) at art/runtime/check_jni.cc:2143</span><br><span class="line">#56 0x000000753d539da8 in _JNIEnv::CallStaticVoidMethod (this=&lt;optimized out&gt;, clazz=&lt;optimized out&gt;, methodID=&lt;optimized out&gt;) at libnativehelper/include_jni/jni.h:780</span><br><span class="line">#57 0x000000753d53c51c in android::AndroidRuntime::start (this=&lt;optimized out&gt;, className=0x5580a87969 &quot;com.android.internal.os.ZygoteInit&quot;, options=..., zygote=&lt;optimized out&gt;) at frameworks/base/core/jni/AndroidRuntime.cpp:1122</span><br><span class="line">#58 0x0000005580a86444 in main (argc=&lt;optimized out&gt;, argv=&lt;optimized out&gt;) at frameworks/base/cmds/app_process/app_main.cpp:352</span><br></pre></td></tr></table></figure>
<p>13.<br><a href="https://blog.csdn.net/zhu929033262/article/details/76064044" target="_blank" rel="noopener">GDB调试Android代码——环境搭建及调试过程</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.malin.xyz/2018/08/08/chromium-cronet/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马琳">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="马琳">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/08/chromium-cronet/" itemprop="url">chromium-cronet</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-08T12:10:00+08:00">
                2018-08-08
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/08/08/chromium-cronet/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/08/08/chromium-cronet/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://chromium.googlesource.com/chromium/src/+/master/components/cronet/android/build_instructions.md" target="_blank" rel="noopener">cronet 编译文档</a></p>
<p><a href="https://console.cloud.google.com/storage/browser/chromium-cronet/android/69.0.3475.0/" target="_blank" rel="noopener">google cloud编译好的文件</a></p>
<p><a href="https://github.com/GoogleChromeLabs/cronet-sample/blob/56a5e5572cb71a4928669262595df57779fd7d5b/README.md" target="_blank" rel="noopener">google cloud编译好的文件使用说明</a></p>
<p><a href="https://chromium.googlesource.com/chromium/src/+/master/components/cronet/" target="_blank" rel="noopener">Quick Start Guide to Using Cronet</a></p>
<p><a href="https://chromium.googlesource.com/chromium/src/+refs" target="_blank" rel="noopener">chromium tag</a></p>
<p><a href="https://github.com/GoogleChromeLabs/cronet-sample" target="_blank" rel="noopener">GoogleChromeLabs-cronet-sample</a></p>
<p><a href="https://github.com/hanpfei/chromium-net/wiki/Cronet-android%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0%E5%88%86%E6%9E%90--%E5%BA%93%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96%EF%BB%BF" target="_blank" rel="noopener">源码分析</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.malin.xyz/2018/06/15/wechat-db/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马琳">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="马琳">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/15/wechat-db/" itemprop="url">wechat</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-06-15T10:25:00+08:00">
                2018-06-15
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/06/15/wechat-db/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/06/15/wechat-db/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>（手机IMEI + 微信uin ）取MD5的前7位</p>
<p>手机的IMEI获取：手机拨号盘输入：<code>*#06#  ,你或者用android代码获取可以，怎么都行</code><br>或者 <code>adb shell service call iphonesubinfo 1 | awk -F &quot;&#39;&quot; &#39;{print $2}&#39; | sed &#39;1 d&#39; | tr -d &#39;.&#39; | awk &#39;{print}&#39; ORS=</code><br>nexus6p:<br>867982021177614</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">adb shell</span><br><span class="line">su</span><br><span class="line">chmod 777 /data/data/com.tencent.mm/shared_prefs/auth_info_key_prefs.xml</span><br><span class="line">exit</span><br><span class="line">exit</span><br><span class="line">adb shell cat /data/data/com.tencent.mm/shared_prefs/auth_info_key_prefs.xml</span><br><span class="line"></span><br><span class="line">adb shell su -c &quot;cat /data/data/com.tencent.mm/shared_prefs/*.xml | grep uin&quot;</span><br><span class="line"></span><br><span class="line">或者adb shell su -c &quot;cat /data/data/com.tencent.mm/shared_prefs/auth_info_key_prefs.xml | grep _auth_uin | cut -b 34-43&quot;</span><br><span class="line"></span><br><span class="line">uid:</span><br><span class="line">cd /data/data/com.tencent.mm/shared_prefs</span><br><span class="line">cat auth_info_key_prefs.xml</span><br><span class="line">&lt;int name=&quot;_auth_uin&quot; value=&quot;1612047176&quot; /&gt;</span><br><span class="line"></span><br><span class="line">echo -n &apos;8679820211776141612047176&apos; | md5sum</span><br><span class="line"></span><br><span class="line">（手机IMEI + 微信uin )==8679820211776141612047176</span><br><span class="line"></span><br><span class="line">取MD5(32位小写) == 51096839112723abc0a096fa0d054b76</span><br><span class="line">取MD5的前7位:5109683</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">其中MicroMsg下某个用户的文件夹名称为 md5(mm+uid)</span><br><span class="line">例如</span><br><span class="line">echo -n &apos;mm1612047176&apos; | md5sum</span><br><span class="line"></span><br><span class="line">md5(mm1612047176)=089c975516ccefb11195d7695bdbf908</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">adb shell</span><br><span class="line">su</span><br><span class="line">cp /data/data/com.tencent.mm/MicroMsg/089c975516ccefb11195d7695bdbf908/EnMicroMsg.db /sdcard/</span><br><span class="line">adb pull /sdcard/EnMicroMsg.db</span><br><span class="line">adb shell am force-stop com.tencent.mm</span><br><span class="line">adb shell am start com.tencent.mm/com.tencent.mm.ui.LauncherUI &amp;&amp; pidcat.py com.tencent.mm -t XposedTag</span><br><span class="line">sqlcipher EnMicroMsg.db &apos;PRAGMA key = &quot;5109683&quot;; PRAGMA cipher_use_hmac = off; PRAGMA kdf_iter = 4000; ATTACH DATABASE &quot;decrypted_database.db&quot; AS decrypted_database KEY &quot;&quot;;SELECT sqlcipher_export(&quot;decrypted_database&quot;);DETACH DATABASE decrypted_database;&apos;</span><br><span class="line">sqlitebrowser decrypted_database.db</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">输入命令1，sqlcipher-shell64.exe encryted.db 【Enter】</span><br><span class="line">输入命令2，PRAGMA key = &apos;thisiskey&apos;;</span><br><span class="line">输入命令3，ATTACH DATABASE &apos;plaintext.db&apos; AS plaintext KEY &quot;&quot;;</span><br><span class="line">输入命令4，SELECT sqlcipher_export(&apos;plaintext&apos;);</span><br><span class="line">输入命令5，DETACH DATABASE plaintext;</span><br><span class="line"></span><br><span class="line">命令解释：</span><br><span class="line">命令1，要操作加密的数据库</span><br><span class="line">命令2，输入加密数据库的密码</span><br><span class="line">命令3，新建了一个数据库plaintext.db, 密码是空【两个单引号中间是空】</span><br><span class="line">命令4，拷贝加密数据库中所有的数据到plaintext.db中</span><br><span class="line">命令5，断开连接</span><br><span class="line">上述命令完成之后就完成了一个解密的过程。</span><br><span class="line">使用sqlite打开plaintext.db发现里面数据和源数据库中的文件一致</span><br></pre></td></tr></table></figure>
<p>getdb.sh<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">uin=`adb shell su -c &quot;cat /data/data/com.tencent.mm/shared_prefs/auth_info_key_prefs.xml | grep _auth_uin | cut -b 34-43&quot;`</span><br><span class="line">echo &quot;uin&quot; $uin</span><br><span class="line">folder=`echo -n mm$uin | md5sum | cut -d &quot; &quot; -f 1`</span><br><span class="line">echo &quot;folder&quot; $folder</span><br><span class="line"></span><br><span class="line">imei=`adb shell service call iphonesubinfo 1 | awk -F &quot;&apos;&quot; &apos;&#123;print $2&#125;&apos; | sed &apos;1 d&apos; | tr -d &apos;.&apos; | awk &apos;&#123;print&#125;&apos; ORS= | cut -d &quot; &quot; -f 1`</span><br><span class="line">echo &quot;imei&quot; $imei</span><br><span class="line"></span><br><span class="line">imeiuin=$imei$uin</span><br><span class="line"></span><br><span class="line">echo &quot;imei+uin&quot; $imeiuin</span><br><span class="line"></span><br><span class="line">pwd=`echo -n $imeiuin | md5sum | cut -c -7`</span><br><span class="line">echo &quot;pwd&quot; $pwd</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">database=&quot;/data/data/com.tencent.mm/MicroMsg/$folder/EnMicroMsg.db&quot;</span><br><span class="line">echo &quot;database &quot;$database</span><br><span class="line">tmpdb=&quot;/sdcard/&quot;</span><br><span class="line">tdb=$tmpdb&quot;EnMicroMsg.db&quot;</span><br><span class="line">echo &quot;tdb &quot;$tdb</span><br><span class="line">adb shell su -c &quot;cp $database $tmpdb&quot;</span><br><span class="line">adb pull $tdb</span><br><span class="line">adb shell rm $tdb</span><br><span class="line"></span><br><span class="line">sleep 1</span><br><span class="line"></span><br><span class="line">pass=&apos;&quot;&apos;$pwd&apos;&quot;&apos;</span><br><span class="line">echo $pass</span><br><span class="line"></span><br><span class="line">sqlcipher EnMicroMsg.db &apos;PRAGMA key = &quot;5109683&quot;; PRAGMA cipher_use_hmac = off; PRAGMA kdf_iter = 4000; ATTACH DATABASE &quot;decrypted_database.db&quot; AS decrypted_database KEY &quot;&quot;;SELECT sqlcipher_export(&quot;decrypted_database&quot;);DETACH DATABASE decrypted_database;&apos;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.malin.xyz/2018/06/08/magisk/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马琳">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="马琳">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/08/magisk/" itemprop="url">Magisk</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-06-08T20:13:00+08:00">
                2018-06-08
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/06/08/magisk/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/06/08/magisk/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://twrp.me/huawei/huaweinexus6p.html" target="_blank" rel="noopener">https://twrp.me/huawei/huaweinexus6p.html</a></p>
<p><a href="https://github.com/topjohnwu/Magisk/releases" target="_blank" rel="noopener">https://github.com/topjohnwu/Magisk/releases</a></p>
<p><a href="https://mp.weixin.qq.com/s?__biz=MzAwMzczMTQzMg==&amp;mid=2649567526&amp;idx=1&amp;sn=3324c3c19096b096cd8425913a7a0524&amp;chksm=832f2ba1b458a2b72d5111379377e64d9eeb61be01faab8ddeeb744f6b7c3492767c0696e288&amp;mpshare=1&amp;scene=1&amp;srcid=0415cty9S7bkg0p1rVHfmJXV#rd" target="_blank" rel="noopener">https://mp.weixin.qq.com/s?__biz=MzAwMzczMTQzMg==&amp;mid=2649567526&amp;idx=1&amp;sn=3324c3c19096b096cd8425913a7a0524&amp;chksm=832f2ba1b458a2b72d5111379377e64d9eeb61be01faab8ddeeb744f6b7c3492767c0696e288&amp;mpshare=1&amp;scene=1&amp;srcid=0415cty9S7bkg0p1rVHfmJXV#rd</a></p>
<p>1.</p>
<p>#fastboot devices ubuntu16.04</p>
<p>#no permissions (user in plugdev group; are your udev rules wrong?); see [<a href="http://developer.android.com/tools/device.html]" target="_blank" rel="noopener">http://developer.android.com/tools/device.html]</a>    fastboot<br><a href="https://blog.csdn.net/qilu0882/article/details/78401399" target="_blank" rel="noopener">https://blog.csdn.net/qilu0882/article/details/78401399</a></p>
<p>2.<br>target reported max download size of 494927872 bytes<br>sending ‘recovery’ (17004 KB)…<br>OKAY [  0.479s]<br>writing ‘recovery’…<br>FAILED (remote: device is locked. Cannot flash images)<br>finished. total time: 0.499s</p>
<p><a href="https://www.androidcentral.com/how-unlock-nexus-6p-bootloader" target="_blank" rel="noopener">https://www.androidcentral.com/how-unlock-nexus-6p-bootloader</a><br>fastboot flashing unlock</p>
<p><a href="https://android.gadgethacks.com/how-to/root-nexus-6p-nexus-5x-windows-mac-linux-the-foolproof-guide-0166128/" target="_blank" rel="noopener">https://android.gadgethacks.com/how-to/root-nexus-6p-nexus-5x-windows-mac-linux-the-foolproof-guide-0166128/</a></p>
<p>fastboot flash recovery twrp.img<br>在界面上选择</p>
<p><a href="https://android.gadgethacks.com/how-to/root-nexus-6p-nexus-5x-windows-mac-linux-the-foolproof-guide-0166128/" target="_blank" rel="noopener">https://android.gadgethacks.com/how-to/root-nexus-6p-nexus-5x-windows-mac-linux-the-foolproof-guide-0166128/</a></p>
<p><a href="https://www.xda-developers.com/how-to-install-magisk/" target="_blank" rel="noopener">https://www.xda-developers.com/how-to-install-magisk/</a></p>
<p><a href="https://github.com/topjohnwu/Magisk/releases" target="_blank" rel="noopener">https://github.com/topjohnwu/Magisk/releases</a></p>
<p>1.<br>下载Magisk-v16.4.zip,Magisk-uninstaller-20180429.zip 放在sdk卡根目录.</p>
<p>1.安装twrp.img<br>打开开发者选项中的oem解锁.<br>下载twrp.img文件.地址为:<a href="https://dl.twrp.me/angler/" target="_blank" rel="noopener">https://dl.twrp.me/angler/</a><br>下载完成后重命名为twrp.img</p>
<p>下载magisk相关文件.Magisk-v16.4.zip,Magisk-uninstaller-20180429.zip<br>下载地址.<br><a href="https://github.com/topjohnwu/Magisk/releases" target="_blank" rel="noopener">https://github.com/topjohnwu/Magisk/releases</a><br><a href="https://github.com/topjohnwu/MagiskManager/releases" target="_blank" rel="noopener">https://github.com/topjohnwu/MagiskManager/releases</a></p>
<p>adb push /sdcard/<br>放在sdk卡根目录.</p>
<p>参考这篇文章<br><a href="https://android.gadgethacks.com/how-to/root-nexus-6p-nexus-5x-windows-mac-linux-the-foolproof-guide-0166128/" target="_blank" rel="noopener">https://android.gadgethacks.com/how-to/root-nexus-6p-nexus-5x-windows-mac-linux-the-foolproof-guide-0166128/</a></p>
<p>adb reboot bootloader<br>fastboot devices<br>如果找不到设备,请参考 <a href="https://blog.csdn.net/qilu0882/article/details/78401399" target="_blank" rel="noopener">https://blog.csdn.net/qilu0882/article/details/78401399</a><br>fastboot flashing unlock</p>
<p>fastboot flash recovery twrp.img</p>
<p>然后,在界面中按音量键,选择.Recovery Mode,然后按电源键选择.稍等.进入twrp界面后,<br>点击install,找到Magisk-v16.4.zip文件,点击安装.</p>
<p>之后reroot<br>设备重启后,安装.MagiskManager-v5.7.0.apk<br><a href="https://www.xda-developers.com/how-to-install-magisk/" target="_blank" rel="noopener">https://www.xda-developers.com/how-to-install-magisk/</a></p>
<p>然后安装XposedInstaller_3.1.5-Magisk.apk<br><a href="https://forum.xda-developers.com/xposed/unofficial-systemless-xposed-t3388268" target="_blank" rel="noopener">https://forum.xda-developers.com/xposed/unofficial-systemless-xposed-t3388268</a></p>
<p>adb install XposedInstaller_3.1.5-Magisk.apk</p>
<p>安装Xposed 必须使用 Magisk 专门版本<br>下载地址:<a href="https://forum.xda-developers.com/xposed/unofficial-systemless-xposed-t3388268" target="_blank" rel="noopener">https://forum.xda-developers.com/xposed/unofficial-systemless-xposed-t3388268</a><br>下载xposed-v90.2-sdk27-beta3-topjohnwu.zip</p>
<p>adb push xposed-v90.2-sdk27-beta3-topjohnwu.zip /sdcard/<br>参考文章:<a href="https://www.jianshu.com/p/21800fc795e6?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=seo_notes&amp;utm_source=recommendation" target="_blank" rel="noopener">https://www.jianshu.com/p/21800fc795e6?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=seo_notes&amp;utm_source=recommendation</a><br><a href="https://www.jianshu.com/p/51c4fa4881e1" target="_blank" rel="noopener">https://www.jianshu.com/p/51c4fa4881e1</a></p>
<p>重启手机,进入Recovery界面。(adb reboot recovery)<br>选择【安装刷机包】进入下级页面，选择【从SD卡选择ZIP文件】<br>在SD卡根目录找到Xposed Framework刷机包(xposed-v86-sdk22-arm64.zip)，并选择。<br>滑动底部的滑动条，确认刷入，等待提示刷机完成。<br>重启手机，等待进入桌面。</p>
<p><a href="https://www.jianshu.com/p/51c4fa4881e1" target="_blank" rel="noopener">https://www.jianshu.com/p/51c4fa4881e1</a><br>一加1刷入Android 8.1(Magisk root, Xposed)</p>
<p>出现如下情况.<br>malin@malin:~/magisk$ adb devices<br>List of devices attached<br>CVH7N15C03002357    device<br>CVH7N15C03002357    no permissions (user in plugdev group; are your udev rules wrong?); see [<a href="http://developer.android.com/tools/device.html]" target="_blank" rel="noopener">http://developer.android.com/tools/device.html]</a></p>
<p>请执行如下命令重启adb<br>adb kill-server<br>adb start-server</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.malin.xyz/2018/06/05/douyin/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马琳">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="马琳">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/05/douyin/" itemprop="url">douyin</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-06-05T18:37:00+08:00">
                2018-06-05
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/06/05/douyin/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/06/05/douyin/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>1.热修复 美团 robust<br><a href="https://github.com/Meituan-Dianping/Robust" target="_blank" rel="noopener">Robust</a></p>
<p>2.chromium网络库<br><a href="https://chromium.googlesource.com/chromium/src/+/lkgr/components/cronet/" target="_blank" rel="noopener">chromium-cronet</a></p>
<p>3.播放器<br><a href="https://github.com/Bilibili/ijkplayer" target="_blank" rel="noopener">ijkplayer</a></p>
<p>4.butterknife<br><a href="https://github.com/JakeWharton/butterknife" target="_blank" rel="noopener">butterknife</a></p>
<p>5.fresco<br><a href="https://github.com/facebook/fresco" target="_blank" rel="noopener">fresco</a></p>
<p>6.gif图库<br><a href="https://github.com/koral--/android-gif-drawable" target="_blank" rel="noopener">android-gif-drawable</a></p>
<p>7.lottie<br><a href="https://github.com/airbnb/lottie-android" target="_blank" rel="noopener">lottie</a></p>
<p>8.状态栏<br><a href="https://github.com/gyf-dev/ImmersionBar" target="_blank" rel="noopener">ImmersionBar</a></p>
<p>9.CustomActivityOnCrash crash拦截<br><a href="https://github.com/Ereza/CustomActivityOnCrash" target="_blank" rel="noopener">CustomActivityOnCrash</a></p>
<p>10.CircularProgressView<br><a href="https://github.com/rahatarmanahmed/CircularProgressView" target="_blank" rel="noopener">https://github.com/rahatarmanahmed/CircularProgressView</a></p>
<p>11.二维码<br><a href="https://github.com/yipianfengye/android-zxingLibrary" target="_blank" rel="noopener">android-zxingLibrary</a></p>
<p>12.同盾安卓 Android应用<br>设备指纹,黑产工具识别等等<br><a href="https://www.tongdun.cn/" target="_blank" rel="noopener">https://www.tongdun.cn/</a><br><a href="https://www.bbsmax.com/A/1O5EplG3J7/" target="_blank" rel="noopener">同盾安卓</a></p>
<p>13.阿里云移动推送<br><a href="https://github.com/aliyun/alicloud-android-demo/tree/master/mpush_android_demo?spm=a2c4g.11186623.2.3.uOwnGg" target="_blank" rel="noopener">阿里云移动推送</a><br><a href="https://www.aliyun.com/product/cps" target="_blank" rel="noopener">Alibaba Cloud Mobile Push</a></p>
<p>阿里云移动推送,魅族push,华为推送,vivo推送,小米推送,个推,友盟push,极光推送,百度云push</p>
<p>14.高德地图</p>
<p>15.今日头条广告追踪配置 - Bytedance<br><a href="https://support.appsflyer.com/hc/zh-cn/articles/115003019403-%E4%BB%8A%E6%97%A5%E5%A4%B4%E6%9D%A1%E5%B9%BF%E5%91%8A%E8%BF%BD%E8%B8%AA%E9%85%8D%E7%BD%AE-Bytedance" target="_blank" rel="noopener">Bytedance</a></p>
<p>16.Firebase Crashlytics<br><a href="https://fabric.io/kits/android/crashlytics/install" target="_blank" rel="noopener">crashlytics</a></p>
<p>17.gcm,firebase,gson,protobuf</p>
<p>18.新浪微博登录</p>
<p>19.square wire,okhttp ,okhttp3</p>
<p>20.bugly,友盟</p>
<p>21.<br>libsdl</p>
<p>22.<br><a href="https://github.com/msgpack/msgpack-java" target="_blank" rel="noopener">https://github.com/msgpack/msgpack-java</a></p>
<p>com.ss.android.common.util.NetworkUtils<br>line:891<br>com.ss.android.common.http.a aVar = com.bytedance.ies.net.a.a.a;<br>return aVar != null ? aVar.a(i, i2, a, (List) list, fVar) : null;</p>
<p>com.ss.android.common.http.a.a(int i, int i2, String a, List list, f f);</p>
<p>com.bytedance.ies.net.processor3.c implements com.ss.android.common.http.a</p>
<p><a href="http://mon.snssdk.com/monitor/appmonitor/v2/settings?sdk_version=400&amp;manifest_version_code=185&amp;_rticket=1528355456545&amp;ac=wifi&amp;os_version=8.1.0&amp;channel=aweGW&amp;version_code=185&amp;device_type=Nexus+6P&amp;language=zh&amp;resolution=1440*2392&amp;openudid=065ddac738d0d2c5&amp;update_version_code=1852&amp;app_name=aweme&amp;version_name=1.8.5&amp;os_api=27&amp;device_brand=google&amp;ssmix=a&amp;device_platform=android&amp;dpi=560&amp;aid=1128&amp;encrypt=close" target="_blank" rel="noopener">http://mon.snssdk.com/monitor/appmonitor/v2/settings?sdk_version=400&amp;manifest_version_code=185&amp;_rticket=1528355456545&amp;ac=wifi&amp;os_version=8.1.0&amp;channel=aweGW&amp;version_code=185&amp;device_type=Nexus+6P&amp;language=zh&amp;resolution=1440*2392&amp;openudid=065ddac738d0d2c5&amp;update_version_code=1852&amp;app_name=aweme&amp;version_name=1.8.5&amp;os_api=27&amp;device_brand=google&amp;ssmix=a&amp;device_platform=android&amp;dpi=560&amp;aid=1128&amp;encrypt=close</a><br>GET /monitor/appmonitor/v2/settings?sdk_version=400&amp;manifest_version_code=185&amp;_rticket=1528355456545&amp;ac=wifi&amp;os_version=8.1.0&amp;channel=aweGW&amp;version_code=185&amp;device_type=Nexus+6P&amp;language=zh&amp;resolution=1440*2392&amp;openudid=065ddac738d0d2c5&amp;update_version_code=1852&amp;app_name=aweme&amp;version_name=1.8.5&amp;os_api=27&amp;device_brand=google&amp;ssmix=a&amp;device_platform=android&amp;dpi=560&amp;aid=1128&amp;encrypt=close HTTP/1.1<br>X-SS-QUERIES    dGMCDr6ot3awANG2fsgrAaK926RyUorcvoJ7un4gZKugONb3vsIKJ3ifDuViomr4xg0LW77Ci4q%2BjKzb8OhmyhzRklsGcxDsnkogonOM0DNc8fV7<br>Accept-Encoding    gzip<br>User-Agent    Dalvik/2.1.0 (Linux; U; Android 8.1.0; Nexus 6P Build/OPM6.171019.030.B1)<br>Host    mon.snssdk.com<br>Connection    keep-alive</p>
<p>2.<br><a href="https://aweme.snssdk.com/ies/speed/1528355455399" target="_blank" rel="noopener">https://aweme.snssdk.com/ies/speed/1528355455399</a><br>GET /ies/speed/1528355455399 HTTP/1.1<br>X-SS-No-Cookie    true<br>User-Agent    Dalvik/2.1.0 (Linux; U; Android 8.1.0; Nexus 6P Build/OPM6.171019.030.B1)<br>Host    aweme.snssdk.com<br>Connection    Keep-Alive<br>Accept-Encoding    gzip</p>
<p>3.<br><a href="http://dm.toutiao.com/get_domains/v4/?abi=arm64-v8a&amp;iid=34596479687&amp;device_id=53048318461&amp;ac=wifi&amp;channel=aweGW&amp;aid=1128&amp;app_name=aweme&amp;version_code=185&amp;version_name=1.8.5&amp;device_platform=android&amp;ssmix=a&amp;device_type=Nexus+6P&amp;device_brand=google&amp;language=zh&amp;os_api=27&amp;os_version=8.1.0&amp;openudid=065ddac738d0d2c5&amp;manifest_version_code=185&amp;resolution=1440*2392&amp;dpi=560&amp;update_version_code=1852&amp;_rticket=1528355458271" target="_blank" rel="noopener">http://dm.toutiao.com/get_domains/v4/?abi=arm64-v8a&amp;iid=34596479687&amp;device_id=53048318461&amp;ac=wifi&amp;channel=aweGW&amp;aid=1128&amp;app_name=aweme&amp;version_code=185&amp;version_name=1.8.5&amp;device_platform=android&amp;ssmix=a&amp;device_type=Nexus+6P&amp;device_brand=google&amp;language=zh&amp;os_api=27&amp;os_version=8.1.0&amp;openudid=065ddac738d0d2c5&amp;manifest_version_code=185&amp;resolution=1440*2392&amp;dpi=560&amp;update_version_code=1852&amp;_rticket=1528355458271</a><br>GET /get_domains/v4/?abi=arm64-v8a&amp;iid=34596479687&amp;device_id=53048318461&amp;ac=wifi&amp;channel=aweGW&amp;aid=1128&amp;app_name=aweme&amp;version_code=185&amp;version_name=1.8.5&amp;device_platform=android&amp;ssmix=a&amp;device_type=Nexus+6P&amp;device_brand=google&amp;language=zh&amp;os_api=27&amp;os_version=8.1.0&amp;openudid=065ddac738d0d2c5&amp;manifest_version_code=185&amp;resolution=1440*2392&amp;dpi=560&amp;update_version_code=1852&amp;_rticket=1528355458271 HTTP/1.1<br>Accept-Encoding    gzip<br>User-Agent    null HttpURLConnection<br>Host    dm.toutiao.com<br>Connection    keep-alive</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.malin.xyz/2018/03/16/gradle-solve-conflict/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马琳">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="马琳">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/16/gradle-solve-conflict/" itemprop="url">gradle 版本冲突解决</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-16T10:25:00+08:00">
                2018-03-16
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/03/16/gradle-solve-conflict/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/03/16/gradle-solve-conflict/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>0.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error:Conflict with dependency &apos;com.android.support:multidex&apos; in project &apos;:app&apos;. Resolved versions for app (1.0.3) and test app (1.0.1) differ. See http://g.co/androidstudio/app-test-app-conflict for details.</span><br></pre></td></tr></table></figure>
<p><a href="http://blog.csdn.net/qq_28486273/article/details/78849506" target="_blank" rel="noopener">http://blog.csdn.net/qq_28486273/article/details/78849506</a><br><a href="https://github.com/talklittle/TestMultidex102" target="_blank" rel="noopener">https://github.com/talklittle/TestMultidex102</a><br><a href="https://www.reddit.com/r/androiddev/comments/6n4lcu/wheres_multidex_102/" target="_blank" rel="noopener">https://www.reddit.com/r/androiddev/comments/6n4lcu/wheres_multidex_102/</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">compile &apos;com.android.support:multidex:1.0.3&apos;</span><br><span class="line">androidTestCompile &apos;com.android.support:multidex:1.0.3&apos;</span><br><span class="line">androidTestCompile &apos;com.android.support:multidex-instrumentation:1.0.3&apos;</span><br></pre></td></tr></table></figure>
<p>1.插件<br><code>app/build.gradle</code>顶部增加<br><code>apply plugin: &#39;project-report&#39;</code><br>执行<br><code>gradlew.bat projectReport</code><br><code>gradlew.bat -DsocksProxyHost=127.0.0.1 -DsocksProxyPort=1080 projectReport</code><br>在浏览器中打开生成的html链接</p>
<p>搜索<br><code>com.android.support:multidex:1.0.3</code><br><code>com.android.support:multidex-instrumentation:1.0.3</code></p>
<p>2.内置任务<br><code>gradle -q app:dependencies</code><br><code>gradle -q app:dependencies &gt; depen.txt</code></p>
<p>3.统一版本</p>
<p>所有工程<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">allprojects &#123;</span><br><span class="line">    //将配置一次性地应用于所有的Project</span><br><span class="line">    repositories &#123;</span><br><span class="line">        maven &#123; url &apos;https://maven.google.com&apos; &#125;</span><br><span class="line">        maven &#123; url &apos;https://dl.google.com/dl/android/maven2/&apos; &#125;</span><br><span class="line">        jcenter()</span><br><span class="line">    &#125;</span><br><span class="line">    configurations.all &#123;</span><br><span class="line">        resolutionStrategy &#123;</span><br><span class="line">            eachDependency &#123; details -&gt;</span><br><span class="line">                // Force all of the primary support libraries to use the same version.</span><br><span class="line">                if (details.requested.group == &apos;com.android.support&apos;</span><br><span class="line">                        &amp;&amp; details.requested.name != &apos;multidex&apos;</span><br><span class="line">                        &amp;&amp; details.requested.name != &apos;multidex-instrumentation&apos;) &#123;</span><br><span class="line">                    details.useVersion &quot;27.1.0&quot;</span><br><span class="line">                &#125;</span><br><span class="line">                // Force all the error-prone dependencies to use the same version.</span><br><span class="line">                if (details.requested.group == &apos;com.android.support&apos;</span><br><span class="line">                        &amp;&amp; (details.requested.name.startsWith(&apos;multidex&apos;) || details.requested.name.startsWith(&apos;multidex-instrumentation&apos;))) &#123;</span><br><span class="line">                    details.useVersion &quot;1.0.3&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>或者</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">allprojects &#123;</span><br><span class="line">    //将配置一次性地应用于所有的Project</span><br><span class="line">    repositories &#123;</span><br><span class="line">        maven &#123; url &apos;https://maven.google.com&apos; &#125;</span><br><span class="line">        maven &#123; url &apos;https://dl.google.com/dl/android/maven2/&apos; &#125;</span><br><span class="line">        jcenter()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    configurations.all &#123;</span><br><span class="line">        resolutionStrategy &#123;</span><br><span class="line">            force &apos;com.android.support:multidex:1.0.3&apos;</span><br><span class="line">            force &apos;com.android.support:multidex-instrumentation:1.0.3&apos;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>除主工程外<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">subprojects &#123;</span><br><span class="line">    //配置所有的子Project（不包含根Project）</span><br><span class="line">    repositories &#123;</span><br><span class="line">        maven &#123; url &apos;https://maven.google.com&apos; &#125;</span><br><span class="line">        maven &#123; url &apos;https://dl.google.com/dl/android/maven2/&apos; &#125;</span><br><span class="line">        jcenter()</span><br><span class="line">    &#125;</span><br><span class="line">    configurations.all &#123;</span><br><span class="line">        resolutionStrategy &#123;</span><br><span class="line">            eachDependency &#123; details -&gt;</span><br><span class="line">                // Force all of the primary support libraries to use the same version.</span><br><span class="line">                if (details.requested.group == &apos;com.android.support&apos;</span><br><span class="line">                        &amp;&amp; details.requested.name != &apos;multidex&apos;</span><br><span class="line">                        &amp;&amp; details.requested.name != &apos;multidex-instrumentation&apos;) &#123;</span><br><span class="line">                    details.useVersion &quot;27.1.0&quot;</span><br><span class="line">                &#125;</span><br><span class="line">                // Force all the error-prone dependencies to use the same version.</span><br><span class="line">                if (details.requested.group == &apos;com.android.support&apos;</span><br><span class="line">                        &amp;&amp; (details.requested.name.startsWith(&apos;multidex&apos;) || details.requested.name.startsWith(&apos;multidex-instrumentation&apos;))) &#123;</span><br><span class="line">                    details.useVersion &quot;1.0.3&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    task subTask &lt;&lt; &#123;</span><br><span class="line">        println project.name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><a href="https://github.com/facebook/shimmer-android" target="_blank" rel="noopener">https://github.com/facebook/shimmer-android</a><br><a href="https://github.com/tabassumLatif/ShimmerRecyclerView" target="_blank" rel="noopener">https://github.com/tabassumLatif/ShimmerRecyclerView</a><br><a href="https://github.com/sharish/ShimmerRecyclerView" target="_blank" rel="noopener">https://github.com/sharish/ShimmerRecyclerView</a><br><a href="http://facebook.github.io/shimmer-android/" target="_blank" rel="noopener">http://facebook.github.io/shimmer-android/</a><br><a href="https://github.com/team-supercharge/ShimmerLayout" target="_blank" rel="noopener">https://github.com/team-supercharge/ShimmerLayout</a></p>
<p><a href="https://stackoverflow.com/questions/36857713/place-holder-list-item-like-facebook-for-content-loading" target="_blank" rel="noopener">https://stackoverflow.com/questions/36857713/place-holder-list-item-like-facebook-for-content-loading</a><br><a href="http://mercury.io/blog/the-psychology-of-waiting-loading-animations-and-facebook" target="_blank" rel="noopener">http://mercury.io/blog/the-psychology-of-waiting-loading-animations-and-facebook</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.malin.xyz/2018/03/08/gradle-proxy-android-studio/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马琳">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="马琳">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/08/gradle-proxy-android-studio/" itemprop="url">gradle-proxy-android-studio</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-08T17:07:00+08:00">
                2018-03-08
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/03/08/gradle-proxy-android-studio/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/03/08/gradle-proxy-android-studio/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>1.android studio 设置中选择proxy设置后,竟然将相关的配置写入了<br><code>/home/user/.gradle/gradle.properties</code>文件中了.导致全局生效,关闭代理后,依赖下载不下来.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">马琳</p>
              <p class="site-description motion-element" itemprop="description">进阶之路<br/>相信美好的事件即将发生</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">45</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">分类</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">马琳</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"malin"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  


















  





  

  

  

  
  

  

  

  

</body>
</html>
