<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>马琳的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="遇见未来">
<meta property="og:type" content="website">
<meta property="og:title" content="马琳的博客">
<meta property="og:url" content="http://www.malin.xyz/index.html">
<meta property="og:site_name" content="马琳的博客">
<meta property="og:description" content="遇见未来">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="马琳的博客">
<meta name="twitter:description" content="遇见未来">
  
    <link rel="alternate" href="/atom.xml" title="马琳的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">马琳的博客</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.malin.xyz"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/25/hello-world/" class="article-date">
  <time datetime="2016-12-25T09:50:30.725Z" itemprop="datePublished">2016-12-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/25/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.malin.xyz/2016/12/25/hello-world/" data-id="cix4ic2zn000efpfuv1hoj8u3" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2016-12-22-shell" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/22/2016-12-22-shell/" class="article-date">
  <time datetime="2016-12-22T09:24:00.000Z" itemprop="datePublished">2016-12-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/22/2016-12-22-shell/">使用脚本安装并启动一个APK</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1.安装并启动一个的APK（例如app.apk这个文件）<br></p>
<p>a.首先需要得到APK的包名<br><br><code>aapt dump badging app.apk | grep package | awk &#39;{print $2}&#39; | sed s/name=//g | sed s/\&#39;//g</code><br></p>
<p>例如得到如下的结果<br><br>com.malin.world<br></p>
<p>b.得到APK的启动Activity类名<br><br><code>aapt dump badging app.apk | grep activity | awk &#39;{print $2}&#39; | sed s/name=//g | sed s/\&#39;//g</code><br></p>
<p>例如得到如下的结果<br><br>com.malin.world.activity.MainActivity<br></p>
<p>c.使用adb命令安装APK到设备<br><br><code>adb install -r app.apk</code></p>
<p>d.使用adb命令启动<br><br><code>adb shell am start -n package/launchable-activity</code><br></p>
<p>例如：<br><br><code>adb shell am start com.malin.world/com.malin.world.activity.MainActivity</code></p>
<p>e.将上面的四个命令写成shell脚本(例如命令为runapp.sh)<br></p>
<p><img src="http://ogxkun013.bkt.clouddn.com/runApp.png" alt=""></p>
<p>d.给脚本授权可执行的权限。<br><br><code>chmod +x runapp.sh</code><br></p>
<p>f.可以将该脚本加入环境变量中。<br></p>
<p>这里可以参考这篇文章 <a href="http://www.malin.xyz/ma/lin/update/2016/11/17/adb.html">Linux,Unix下环境变量的配置</a><br></p>
<p>g.执行试试看。<br></p>
<p><img src="http://ogxkun013.bkt.clouddn.com/installRun.png" alt=""></p>
<p>该APK被安装到了手机上并启动了。<br></p>
<p>i.如果应用已经被安装了可以使用如下的脚本<br></p>
<p><img src="http://ogxkun013.bkt.clouddn.com/runapp.png" alt=""></p>
<p>参考文章列表<br><br>1.<a href="http://stackoverflow.com/questions/2789462/find-package-name-for-android-apps-to-use-intent-to-launch-market-app-from-web" target="_blank" rel="external">find-package-name-for-android-apps-to-use-intent-to-launch-market-app-from-web</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.malin.xyz/2016/12/22/2016-12-22-shell/" data-id="cix4ic2zm000dfpfuxd37sd29" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2016-12-18-http" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/18/2016-12-18-http/" class="article-date">
  <time datetime="2016-12-18T09:24:00.000Z" itemprop="datePublished">2016-12-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/18/2016-12-18-http/">Ubuntu修改Host不生效的问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1.编辑<code>/etc/hosts</code>文件<br><br><code>sudo vim /etc/hosts</code><br></p>
<p>添加host，或者注释掉host<br></p>
<p>2.重启网络<br><br><code>sudo /etc/init.d/networking restart</code><br></p>
<p>或者<br></p>
<p>3.使用ping xxxxx测试修改后是否生效。<br></p>
<p>4.如果没有生效的话，有可能是因为有一次使用vim,然后异常退出，产生了hosts.swp文件。<br><br>使用如下的命令查找hosts.swp文件。<br><br><code>locate update</code><br><br><code>locate *.swp</code><br></p>
<p>5.找到后删除这个文件<br><code>sudo rm -rf /xx/xx/hosts.swp</code></p>
<p>sed ‘s/\”//g’</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.malin.xyz/2016/12/18/2016-12-18-http/" data-id="cix4ic2zk000bfpfufu8pso0o" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2016-12-14-host" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/14/2016-12-14-host/" class="article-date">
  <time datetime="2016-12-14T09:24:00.000Z" itemprop="datePublished">2016-12-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/14/2016-12-14-host/">Ubuntu Http 请求</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1.httpie<br></p>
<p><code>http get https://api.weibo.com/2/trends/hourly.json?access_token=2.004YppQEmwhOvBb3fbef84beEkKntC</code><br></p>
<p><code>http get https://api.weibo.com/2/trends/hourly.json &quot;access_token&quot;==&quot;2.004YppQEmwhOvBb3fbef84beEkKntC&quot;</code><br></p>
<p><code>http post https://api.weibo.com/2/statuses/upload_url_text.json &quot;status&quot;==&quot;hello world&quot; &quot;url&quot;==&quot;http://www.baidu.com&quot;</code><br></p>
<p><a href="http://www.jianshu.com/p/0736d508be44" target="_blank" rel="external">使用httpie进行接口测试</a><br></p>
<p>2.httpstat<br></p>
<p><a href="https://mp.weixin.qq.com/s?__biz=MjM5NjQ4MjYwMQ==&amp;mid=2664608594&amp;idx=1&amp;sn=410f48527e4910f1d44f5965ea628d74&amp;chksm=bdce88148ab901020d130d32fc5bb4ad4bd72c1ec767560b893d681009cfaef16ca9902a88d9&amp;mpshare=1&amp;scene=1&amp;srcid=1218XPDF0n0YNmWHlvrbuDx4&amp;pass_ticket=o7BDekJR2QaDbACYuZJJpI8dCs9%2BnyzdFKx%2B2qtah3ktUrKscsWvC6tJGZQFZ6r%2F#rd" target="_blank" rel="external">httpstat：一个检查网站性能的 curl 统计分析工具</a><br></p>
<p><a href="https://github.com/reorx/httpstat" target="_blank" rel="external">httpstat GitHub主页</a><br></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.malin.xyz/2016/12/14/2016-12-14-host/" data-id="cix4ic2zl000cfpfuuz9qua2r" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2016-12-06-unzip" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/06/2016-12-06-unzip/" class="article-date">
  <time datetime="2016-12-06T09:24:00.000Z" itemprop="datePublished">2016-12-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/06/2016-12-06-unzip/">android使用tcpdump抓包</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>0.如果是手机的话，请先root了，再执行如下的命令<br></p>
<p>1.adb shell<br></p>
<p>2.su<br></p>
<p>3.给手机<code>/data/local/</code>目录授权<br><br><code>chmod 777 /data/local/</code></p>
<p>4.下载tcpdump<a href="http://www.strazzere.com/android/tcpdump" target="_blank" rel="external">点击下载</a></p>
<p>5.将<code>tcpdump</code>推送到手机的<code>/data/local/</code>目录下<br><br><code>adb push tcpdump /data/local/tcpdump</code></p>
<p>6.给tcpdump设置相关执行权限。<br><br><code>chmod 6755 /data/local/tcpdump</code></p>
<p>7.启动tcpdump开始抓取<br><br><code>/data/local/tcpdump -p -vv -s 0 -w /sdcard/capture.pcap</code></p>
<p>-p 将网络接口设置成非混杂模式<br><br>-vv 输出详细的报文信息<br><br>-s 设置捕获数据包的长度，从每个分组中读取最开始的snaplen个字节，而不是默认的68个字节，这里使用0，表示获取全部数据包。<br><br>-w 将监听到的数据包写入指定文件，不分析和打印数据包。<br></p>
<p>8.从手机中将数据包拉到电脑目录中<br><br><code>adb pull /sdcard/capture.pcap /home/malin/nn</code><br></p>
<p>参考资料<br><br><a href="http://codingnow.cn/android/1633.html" target="_blank" rel="external">android使用tcpdump抓包</a><br><br><a href="http://www.cnblogs.com/TankXiao/archive/2012/10/10/2711777.html" target="_blank" rel="external">Wireshark基本介绍和学习TCP三次握手</a><br><br><a href="http://www.myhack58.com/Article/48/67/2013/39798.htm" target="_blank" rel="external">详解使用tcpdump、wireshark对Android应用程序进行抓包并分析</a><br><br><a href="http://mrpeak.cn/blog/tutorial-tcpdump/" target="_blank" rel="external">IOS,Android网络抓包教程之tcpdump</a><br><br><a href="http://www.cnblogs.com/findyou/p/3491035.html" target="_blank" rel="external">Android抓包方法(二)之Tcpdump命令+Wireshark</a><br><br><a href="http://baike.baidu.com/link?url=oxGJFuDFnX4vkKbKadGsBz-Ysu4rb5Zk_XHQywUF_FUwqTGhg0lT-Lb1PBg3yxhZJhc9bZ73Mc2eB1L2gK4b_D31pmrY8uGUg1yCrDqQtJO" target="_blank" rel="external">0x16进制</a><br><br><a href="http://stackoverflow.com/questions/12722157/not-able-to-run-executable-file-from-adb-shell" target="_blank" rel="external">not-able-to-run-executable-file-from-adb-shell</a><br><br><a href="http://blog.csdn.net/zrzlj/article/details/6076219/" target="_blank" rel="external">Wireshark和TcpDump抓包分析心得</a><br><br><a href="https://www.centos.bz/2014/07/linux-commandline-capture-packets-tshark-wireshark/" target="_blank" rel="external">Linux命令行抓包及包解析工具tshark(wireshark)使用实例解析</a><br><br><a href="https://wiki.ubuntu.com.cn/%E7%BD%91%E5%8D%A1" target="_blank" rel="external">网卡</a><br><br><a href="http://blog.csdn.net/hanyuxinting/article/details/5558095" target="_blank" rel="external">wireshark的使用（filter的用法</a></p>
<p>ifconfig<br><br>enp3s0<br></p>
<p><code>sudo tcpdump -i enp3s0</code><br></p>
<p>可以用到的命令<br><br>实时打印当前http请求的url(包括域名)<br><br><code>tshark -s 512 -i enp3s0 -n -f &#39;tcp dst port 80&#39; -Y &#39;http.host and http.request.uri&#39; -T fields -e http.host -e http.request.uri -l | tr -d &#39;\t&#39;</code><br>下面介绍参数含义：</p>
<p>-s 512 :只抓取前512个字节数据<br><br>-i enp3s0 :捕获enp3s0网卡(可以通过ifconfig获取，或者 <code>sudo lshw -class network | grep &quot;logical name&quot;</code>）<br><br>-n :禁止网络对象名称解析<br><br>-f ‘tcp dst port 80’ :只捕捉协议为tcp,目的端口为80的数据包<br><br>-Y ‘http.host and http.request.uri’ :过滤出http.host和http.request.uri<br><br>-T fields -e http.host -e http.request.uri :打印http.host和http.request.uri<br><br>-l ：输出到标准输出<br></p>
<p>对数据进行过滤<br><br><code>tshark -s 512 -i enp3s0 -n -f &#39;ip src 10.31.4.46 || ip src 10.31.4.39 &amp;&amp; tcp port 46869 || tcp port 8888&#39;</code><br></p>
<p><code>ip.src == 10.31.4.46 &amp;&amp; ip.dst == 10.31.4.39 &amp;&amp; tcp.port eq 46027  ||  tcp.port eq 46030 &amp;&amp; http</code><br></p>
<p><code>tcp &amp;&amp; tcp.port eq 1084 &amp;&amp; ip.src == 10.110.18.48</code><br></p>
<p>过滤登录接口<br><br>/home/malin/malinoo/bili.pcapng  位置196<br><br><code>ip.src == 10.31.4.46 || ip.src == 10.31.4.39&amp;&amp; tcp.port eq 46869 || tcp.port eq 8888</code></p>
<p>点击想要查看的地址，右键–&gt;追踪流–&gt;TCP流。可以查看相关的网络信息。<br><br>这个功能我比较喜欢，可以查看此次http，client端请求和server端返回的数据<br></p>
<p><code>sudo tcpdump -i enp3s0 -AAl src 10.31.4.46 or dst 10.31.4.39</code><br></p>
<p>过滤URL<br><br><code>ip.src == 10.31.4.46 &amp;&amp; http contains &quot;panda&quot; &amp;&amp; http</code><br><br><code>ip.src == 10.31.4.46 &amp;&amp; http contains &quot;panda&quot; &amp;&amp; http &amp;&amp; http.request.method == &quot;GET&quot; || http.request.method==&quot;POST&quot; &amp;&amp; http.request.uri  contains &quot;panda&quot;</code><br></p>
<p>contains”操作符允许一个过滤器搜索一串字符，其形式为字符串，或者字节，或者字节组。例如在搜索一个HTTP URL地址，可以使用下面的过滤器：<br><br>http contains “<a href="http://www.wireshark.org”；" target="_blank" rel="external">http://www.wireshark.org”；</a> <br><br>“contains”操作符不能被用于原子型的字段，比如数字和ip地址。<br></p>
<p>http.host==6san.com<br><br>http.host contains 6san.com<br><br>//过滤经过指定域名的http数据包，这里的host值不一定是请求中的域名<br></p>
<p>http.response.code==302<br><br>//过滤http响应状态码为302的数据包<br></p>
<p>http.response==1<br><br>//过滤所有的http响应包<br><br>http.request==1<br><br>//过滤所有的http请求，貌似也可以使用http.request<br></p>
<p>http.request.method==POST<br><br>//wireshark过滤所有请求方式为POST的http请求包，注意POST为大写<br></p>
<p>http.cookie contains guid<br><br>//过滤含有指定cookie的http数据包<br></p>
<p>http.request.uri==”/online/setpoint”<br><br>//过滤请求的uri，取值是域名后的部分<br></p>
<p>http.request.full_uri==” <a href="http://task.browser.360.cn/online/setpoint”" target="_blank" rel="external">http://task.browser.360.cn/online/setpoint”</a><br><br>//过滤含域名的整个url则需要使用http.request.full_uri<br></p>
<p>http.server contains “nginx”<br><br>//过滤http头中server字段含有nginx字符的数据包<br></p>
<p>http.content_type == “text/html”<br><br>//过滤content_type是text/html的http响应、post包，即根据文件类型过滤http数据包<br></p>
<p>http.content_encoding == “gzip”<br><br>//过滤content_encoding是gzip的http包<br></p>
<p>http.transfer_encoding == “chunked”<br><br>//根据transfer_encoding过滤<br></p>
<p>http.content_length == 279<br><br>http.content_length_header == “279”<br><br>//根据content_length的数值过滤<br></p>
<p>http.server<br><br>//过滤所有含有http头中含有server字段的数据包<br></p>
<p>http.request.version == “HTTP/1.1”<br><br>//过滤HTTP/1.1版本的http包，包括请求和响应<br></p>
<p>http.response.phrase == “OK”<br><br>//过滤http响应中的phrase<br></p>
<p>sslkeylog</p>
<p>ip.src == 10.31.4.62 &amp;&amp; ip.dst == 10.31.4.90</p>
<p>ip.src == 10.31.4.116 &amp;&amp; http contains “panda” &amp;&amp; http &amp;&amp; http.request.method == “GET” || http.request.method==”POST” &amp;&amp; http.request.uri  contains “panda”<br>ip.src == 10.31.4.116 &amp;&amp; http &amp;&amp; http.request.method == “GET” || http.request.method==”POST” &amp;&amp; http.request.uri  contains “getFollowLiveCount”</p>
<p>sudo tar zxvf jdk-8u112-linux-x64.tar.gz -C /usr/lib/jvm</p>
<p>tshark -s 512 -i enp3s0 -n -f ‘ip src 10.31.4.116 &amp;&amp; ip src 10.31.4.90 &amp;&amp; tcp port 46869 || tcp port 8888’</p>
<p><code>tshark -s 512 -i enp3s0 -n -f &#39;ip src 10.31.4.116 &amp;&amp; ip dst 10.31.4.90&#39; -Y &#39;http.request.uri contains &quot;panda&quot;&#39; -T fields -e http.request.uri -l | tr -d &#39;\t&#39;</code></p>
<p>实时打印当前http请求的url(包括域名)<br><br><code>tshark -s 512 -i enp3s0 -n -f &#39;ip src 10.31.4.116 &amp;&amp; ip dst 10.31.4.90&#39; -Y &#39;http.host and http.request.uri&#39; -T fields -e http.host -e http.request.uri -l | tr -d &#39;\t&#39;</code></p>
<p>git status</p>
<p>耗费了 2.92 秒以枚举未跟踪的文件。’status -uno’ 也许能提高速度，<br>但您需要小心不要忘了添加新文件（参见 ‘git help status’）。<br>修改尚未加入提交（使用 “git add” 和/或 “git commit -a”）<br>git status -uno</p>
<p>ip.src == 10.31.4.62 &amp;&amp; ip.dst == 10.31.146.12</p>
<p>ip.src == 10.31.146.12 &amp;&amp; ip.dst == 10.31.4.116</p>
<p>tshark -s 512 -i enp3s0 -n -f ‘ip src 10.31.146.12 &amp;&amp; ip dst 10.31.4.116’</p>
<p>ip.src == 10.31.146.12 &amp;&amp; ip.dst == 10.31.4.116 &amp;&amp; tcp.flags.syn == 0x02</p>
<p>ip.src == 101.201.233.158 &amp;&amp; ip.dst == 10.31.4.116 &amp;&amp; tcp</p>
<p>ip.dst == 10.31.4.116</p>
<p>sed -i ‘42s/.*/private static final String TAG = “IWantToTestHotFix”;/‘ app/src/main/java/tinker/sample/android/app/MainActivity.java</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.malin.xyz/2016/12/06/2016-12-06-unzip/" data-id="cix4ic2zk000afpfusr5ga8pm" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2016-12-04-tcp" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/04/2016-12-04-tcp/" class="article-date">
  <time datetime="2016-12-04T09:24:00.000Z" itemprop="datePublished">2016-12-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/04/2016-12-04-tcp/">Ubuntu下解压乱码的问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在工作中，经常遇到设计师发来的UI图片压缩包（MacOX上压缩的），产品给的文档（Windows下压缩的）。解压出来，都是乱码。<br><br>解决方案：<br><br>1.安装<code>p7zip</code>，<code>convmv</code><br><code>sudo apt-get install p7zip convmv</code><br></p>
<p>安装完之后，就可以用7za和convmv两个命令完成解压缩任务。<br></p>
<p>2.解压文件<br><br><code>LANG=C 7za x your-zip-file.zip</code><br><br>用于解压缩，而LANG=C表示以US-ASCII这样的编码输出文件名，如果没有这个语言设置，它同样会输出乱码，只不过是UTF8格式的乱码(convmv会忽略这样的乱码)。<br></p>
<p>3.格式转换<br><br><code>convmv -f GBK -t utf8 --notest -r .</code><br><br>将GBK编码的文件名转化为UTF8编码，-r表示递归访问目录，即对当前目录中所有文件进行转换。<br></p>
<p>4.如果嫌这样很麻烦，可以修改成shell脚本。<br></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.malin.xyz/2016/12/04/2016-12-04-tcp/" data-id="cix4ic2zj0009fpfutmsdor7r" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2016-11-29-tinker" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/29/2016-11-29-tinker/" class="article-date">
  <time datetime="2016-11-29T04:55:00.000Z" itemprop="datePublished">2016-11-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/29/2016-11-29-tinker/">Tinker</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>0.Check your version of gradle,Ensure the version of gradle greater than 2.14.1<br></p>
<blockquote>
<p>e.g. <code>2.14.1</code> <code>3.1</code> <code>3.2</code> <code>3.2.1</code><br><br>You can download the gradle from this website<br><br><a href="https://services.gradle.org/distributions" target="_blank" rel="external">https://services.gradle.org/distributions</a><br><br><br><br>add <code>adb</code> ,<code>gradle</code> on your path<br><br>You can see this article <a href="http://www.goodmalin.com/ma/lin/update/2016/11/17/adb.html" target="_blank" rel="external">How to adb into your path</a><br><br><br><br><br>You can see the <a href="https://github.com/Tencent/tinker/wiki" target="_blank" rel="external">Tinker wiki</a>.<br><br><a href="https://github.com/Tencent/tinker/wiki" target="_blank" rel="external">https://github.com/Tencent/tinker/wiki</a><br></p>
</blockquote>
<p>1.DownLoad the source code of <a href="https://github.com/Tencent/tinker" target="_blank" rel="external">tinker</a> from github <br><br><code>git clone git@github.com:Tencent/tinker.git</code></p>
<p>2.Open the Sample project<br><br><code>cd tinker/tinker-sample-android</code></p>
<p>3.DownLoad the dependencies of sample,It may take a long time when you run firstly,you can drink a cup of coffee.<br><br><code>gradle clean</code></p>
<p>4.Buid debug apk<br><br><code>gradle assembleDebug</code></p>
<p>5.Install the debug base apk into your phone or emulator(e.g. <a href="https://www.genymotion.com/" target="_blank" rel="external">Genymotion</a>,<a href="http://www.bluestacks.cn/bdsem_anmnq.html" target="_blank" rel="external">Bluestacks</a>)<br><br><code>adb uninstall tinker.sample.android &amp;&amp; adb install app/build/bakApk/*.apk</code></p>
<p>6.Start the debug base apk<br><br><code>adb shell am start tinker.sample.android/.app.MainActivity</code></p>
<p>7.Change some codes in order to fix bugs<br></p>
<blockquote>
<p>TODO:// Coding in order to fix bug1<br><br>TODO:// Coding in order to fix bug2<br></p>
</blockquote>
<p>e.g.Change the Log TAG of MainActivity<br></p>
<p>one: get row of TAG<br><br><code>grep -n &quot;TAG&quot; app/src/main/java/tinker/sample/android/app/MainActivity.java | head -n 1 | cut -d &quot;:&quot; -f 1</code></p>
<p>two: Replace the TAG to your tag eg:TestTinker<br><br><code>sed -i &#39;42s/.*/private static final String TAG = &quot;TestTinker&quot;;/&#39; app/src/main/java/tinker/sample/android/app/MainActivity.java</code></p>
<p>three: confirm the change successfully<br><br><code>grep -n &quot;TestTinker&quot; app/src/main/java/tinker/sample/android/app/MainActivity.java</code></p>
<p>8.Get the base debug apk fileName<br><br><code>find app/build/bakApk/ -type f -name *.apk -print | xargs ls -ltr | head -n 1 | awk &#39;{print $9}&#39; | cut -d  &quot;/&quot; -f 4</code></p>
<p>9.Get “tinkerOldApkPath” first occurrence of rows which from tinker-sample-android/app/build.gradle<br><br><code>grep -n &quot;tinkerOldApkPath&quot; app/build.gradle | head -n 1 | cut -d  &quot;:&quot; -f 1</code></p>
<p>10.Change the config of app/build.gradle to Updte the tinkerOldApkPath<br></p>
<blockquote>
<p>Replace the line numbers which from number9 and apkName which from number8</p>
</blockquote>
<p>e.g. <br><br><img src="http://ogxkun013.bkt.clouddn.com/tinker10.png" alt="tinker10"></p>
<p>number8 app-debug-1130-12-54-43.apk<br><br>number9 147<br></p>
<p>thus,you can get the command.<br></p>
<blockquote>
<p>sed -i ‘number8s/.*/tinkerOldApkPath=”${bakPath}\/number9”/‘ app/build.gradle<br></p>
</blockquote>
<p>e.g.<br><br><code>sed -i &#39;147s/.*/tinkerOldApkPath=&quot;${bakPath}\/app-debug-1130-12-54-43.apk&quot;/&#39; app/build.gradle</code><br></p>
<p>11.confirm the number11 do successfully</p>
<blockquote>
<p>grep -n “number8” app/build.gradle<br></p>
</blockquote>
<p>e.g.<br><br><code>grep -n &quot;app-debug-1130-12-54-43.apk&quot; app/build.gradle</code></p>
<p>12.Build in order to the patch apk<br><br><code>gradle tinkerPatchDebug</code></p>
<p>13.Push patch apk into phone or emulator<br><br><code>adb push app/build/outputs/tinkerPatch/debug/patch_signed_7zip.apk /sdcard/</code></p>
<p>14.Click LOADPATH Button on the Sample App<br><br>If PATH load success,the you can see the Toast which is <code>patch success,please restart process</code>.<br></p>
<p>15.kill the running apk or restart the running apk<br><br><code>adb shell am force-stop tinker.sample.android</code></p>
<p>or<br></p>
<p>If you phone is root,you can use adb shell kill -9 pid<br><br>./kill.sh<br></p>
<p>the content of kill.sh<br></p>
<p><img src="http://ogxkun013.bkt.clouddn.com/kill2.png" alt="kill.sh"></p>
<p>a.<code>vim kill.sh &amp;&amp; chmod 777 ./kill.sh</code><br><br>b.input content of kill.sh<br><br>c.then <code>./kill.sh</code></p>
<p>16.Start the apk again<br><br><code>adb shell am start tinker.sample.android/.app.MainActivity</code></p>
<p>17.Click showinfo in order to confirm the patch load successfully or not.</p>
<p><code>adb logcat | grep TestTinker</code><br></p>
<p>If you see log which tag is “TestTinker”,Congratulate to you!<br></p>
<p>18.Change some codes in order to hot fix bugs from number 8<br></p>
<blockquote>
<p>TODO:// Coding in order to fix bug1<br><br>TODO:// Coding in order to fix bug2<br></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.malin.xyz/2016/11/29/2016-11-29-tinker/" data-id="cix4ic2zg0006fpfu5ajlx4sm" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2016-12-02-tinker-cn" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/29/2016-12-02-tinker-cn/" class="article-date">
  <time datetime="2016-11-28T16:00:00.000Z" itemprop="datePublished">2016-11-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/29/2016-12-02-tinker-cn/">终端下完成Tinker Sample的调试</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>0.<br>首先确保你电脑配置了<code>gradle</code>环境变量，并且grade的版本大于等于2.14.1<br><br>例如<code>2.14.1</code> <code>3.1</code> <code>3.2</code> <code>3.2.1</code><br></p>
<p>可以使用这个命令查看gradle版本号<br><br><code>gradle --version</code><br></p>
<p>Gradle可以从这个网站下载<br><br><a href="https://services.gradle.org/distributions" target="_blank" rel="external">https://services.gradle.org/distributions</a></p>
<p>确保你配置了<code>adb</code>环境变量。如果没有配置，可以参考这篇文章<a href="http://www.goodmalin.com/ma/lin/update/2016/11/17/adb.html" target="_blank" rel="external">Linux,Unix下环境变量的配置</a><br><br>可以使用<code>adb --version</code>查看是否配置了<code>adb</code>环境变量。</p>
<p>本文所有命令均在Ubuntu上调试的，Mac OS上应该都有，Windows上开发的同学可以自行转换为相应的命令<br><br>本文参考Tinker的官方wiki来写的。<br><br><a href="https://github.com/Tencent/tinker/wiki/Tinker-%E6%8E%A5%E5%85%A5%E6%8C%87%E5%8D%97" target="_blank" rel="external">https://github.com/Tencent/tinker/wiki</a><br></p>
<p>1.从github上下载<a href="https://github.com/Tencent/tinker" target="_blank" rel="external">tinker</a>的源码<br><br><code>git clone git@github.com:Tencent/tinker.git</code></p>
<p>2.切换到tinker-sample-android目录下<br><br><code>cd tinker/tinker-sample-android</code></p>
<p>3.下载依赖，第一次运行可能需要很长时间，因为需要下载一些依赖库.<br><br><code>gradle clean</code></p>
<p>4.编译生成Debug版本的Apk<br><br><code>gradle assembleDebug</code></p>
<p>5.将编译生成的apk安装到手机或者模拟器中(<a href="https://www.genymotion.com/" target="_blank" rel="external">Genymotion</a>,<a href="http://www.bluestacks.cn/bdsem_anmnq.html" target="_blank" rel="external">Bluestacks</a>)<br><br><code>adb uninstall tinker.sample.android &amp;&amp; adb install app/build/bakApk/*.apk</code></p>
<p>6.启动安装的apk<br><br><code>adb shell am start tinker.sample.android/.app.MainActivity</code></p>
<p>7.修改代码，这里演示修改MainActivity中的TAG,来验证热修复<br><br>7.1: 得到MainActivity中TAG变量的行数<br><br><code>grep -n &quot;TAG&quot; app/src/main/java/tinker/sample/android/app/MainActivity.java | head -n 1 | cut -d &quot;:&quot; -f 1</code></p>
<p>7.2: 将TAG替换为新的值例如:IWantToTestHotFix<br><br>  注意：下一行中的<code>42</code>为上一条命令中获取的<code>MainActivity中TAG变量的行数</code>，<code>IWantToTestHotFix</code>为我们要替换后的TAG值。<br><br><code>sed -i &#39;42s/.*/private static final String TAG = &quot;IWantToTestHotFix&quot;;/&#39; app/src/main/java/tinker/sample/android/app/MainActivity.java</code></p>
<p>7.3: 确认一下替换是否成功，可以通过查询替换后TAG的值和所在的行数<br><br><code>grep -n &quot;IWantToTestHotFix&quot; app/src/main/java/tinker/sample/android/app/MainActivity.java</code></p>
<p>8.获取编译生成的Debug版本APK的名字<br><br><code>find app/build/bakApk/ -type f -name *.apk -print | xargs ls -ltr | head -n 1 | awk &#39;{print $9}&#39; | cut -d  &quot;/&quot; -f 4</code></p>
<p>9.获取”tinkerOldApkPath”字符串在tinker-sample-android/app/build.gradle文件中的行数<br><br><code>grep -n &quot;tinkerOldApkPath&quot; app/build.gradle | head -n 1 | cut -d  &quot;:&quot; -f 1</code></p>
<p>10.用第8步获得的APK的名字，替换到app/build.gradle中tinkerOldApkPath的值<br></p>
<p>例如. <br><br>第8步得到的值为: <code>app-debug-1130-12-54-43.apk</code><br><br>第9步得到的值为: <code>147</code><br></p>
<p>那么使用如下的命令直接在app/build.gradle文件中，将第<code>147</code>行将tinkerOldApkPath替换为<code>app-debug-1130-12-54-43.apk</code>.<br></p>
<p>e.g.<br><br><code>sed -i &#39;147s/.*/tinkerOldApkPath=&quot;${bakPath}\/app-debug-1130-12-54-43.apk&quot;/&#39; app/build.gradle</code><br></p>
<p>实际使用时，你要做的就是将下面命令中number8替换为第8步得到的值，将number9替换为第9步得到的值。<br><br>然后执行这条命令即可完成替换工作。<br><br><code>sed -i &#39;number8s/.*/tinkerOldApkPath=&quot;${bakPath}\/number9&quot;/&#39; app/build.gradle</code><br></p>
<p>11.确认是否替换成功<br><br>例如.<br><br><code>grep -n &quot;app-debug-1130-12-54-43.apk&quot; app/build.gradle</code></p>
<p>实际使用时，你要做的就是将下面命令中number8替换为第8步得到的值。<br><br>然后执行这条命令即，如果替换成功你将看到替换的字符串的名字和所在的行数。<br><br><code>grep -n &quot;number8&quot; app/build.gradle</code><br></p>
<p>12.编译生成补丁包<br><br><code>gradle tinkerPatchDebug</code></p>
<p>13.将补丁包APK文件推送到手机的sdcard根目录中<br><br><code>adb push app/build/outputs/tinkerPatch/debug/patch_signed_7zip.apk /sdcard/</code></p>
<p>14.点击LOADPATH Button，加载补丁，需要等上3到4秒，<br><br>如果加载成功，你将可以看到一个Toast <code>patch success,please restart process</code>.<br></p>
<p>15.然后，就可以锁屏或者杀死该应用进程，你可以点击KILL SELF。<br><br>可以使用如下的命令完成<br><br><code>adb shell am force-stop tinker.sample.android &amp;&amp; adb shell am start tinker.sample.android/.app.MainActivity</code></p>
<p>16.点击应用上的<code>SHOW INFO</code>按钮确认补丁是否加载成功，如果成功,可以看到.<br><br>弹出的Dialog的第一行显示[path is loaded]</p>
<p>同时，你可以查看自己修改的TAG是否生效。使用如下的命令过滤Log的TAG即可。<br><br>这里的TAG就是第7步修改的TAG。<br><br><code>adb logcat | grep IWantToTestHotFix</code><br><br>如果执行上个命令看到了TAG为<code>IWantToTestHotFix</code>的Log，祝贺你热修复成功了<br></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.malin.xyz/2016/11/29/2016-12-02-tinker-cn/" data-id="cix4ic2zi0007fpfu47my7zmr" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2016-11-17-adb" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/17/2016-11-17-adb/" class="article-date">
  <time datetime="2016-11-17T12:14:00.000Z" itemprop="datePublished">2016-11-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/17/2016-11-17-adb/">Linux,Unix下环境变量的配置</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>这里配置到当前的用户下<br></p>
<p>1.编辑配置文件<br><br>命令如下<br><br><code>vim ~/.bashrc</code></p>
<p>2.进入后，在英文输入法下，输入i(表示插入),在配置文件的最后，添加如下配置，这里以Android SDK Tool为例<br></p>
<p><code>export ANDROID_HOME=/home/malin/sdk</code><br><br><code>export PATH=$PATH:$ANDROID_HOME/platform-tools</code><br><br><code>export PATH=$PATH:$ANDROID_HOME/tools</code><br></p>
<p><img src="http://ogxkun013.bkt.clouddn.com/huanjing.png" alt="environment"></p>
<blockquote>
<p>说明:<br><br>这里/home/malin/sdk 是我电脑上Android SDK的路径。请替换为你自己电脑上Android SDK的路径。<br><br>便捷的方法是，使用cd命令切换到sdk的文件夹下。<br><br>例如：<code>cd /home/malin/sdk</code>。然后使用pwd命令查看当前的路径<br></p>
</blockquote>
<p>插入如上的文本后，就是保存了,步骤如下所示:<br><br>a.按 Esc键（键盘的左上角）<br><br>b.英文输入法下输入 :wq<br><br>c.输入回车<br><br>这样紫就保存了.<br></p>
<p><img src="http://ogxkun013.bkt.clouddn.com/e2.png" alt="environment2"></p>
<p>3.使配置文件生效<br><br>使用如下的命令<br><br><code>source ~/.bashrc</code></p>
<p>4.测试是否生效<br><br><code>adb version</code></p>
<p>5.获取手机IP地址：<br><br>将 Android 设备与要运行 adb 的电脑连接到同一个局域网，比如连到同一个 WiFi。<br><br>将设备与电脑通过 USB 线连接。<br><br>应确保连接成功（可运行 adb devices 看是否能列出该设备）。<br><br>让设备在 5555 端口监听 TCP/IP 连接：<br><br>adb tcpip 5555<br><br>断开 USB 连接。<br><br>找到设备的 IP 地址。<br><br>一般能在「设置」-「关于手机」-「状态信息」-「IP地址」找到。<br><br>通过 IP 地址连接设备。<br></p>
<p>或者使用如下的脚本获取手机的IP地址。<br><br><code>adb shell ifconfig | grep &quot;inet addr&quot; | grep &quot;Bcast&quot; | cut -d &quot;:&quot; -f 2 | cut -d &quot; &quot; -f 1</code><br></p>
<p>adb connect <device-ip-address><br><br>这里的 <device-ip-address> 就是上一步中找到的设备 IP 地址。<br><br>确认连接状态。<br><br>adb devices<br></device-ip-address></device-ip-address></p>
<p><img src="http://ogxkun013.bkt.clouddn.com/adb_connect.png" alt="adb_connect"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.malin.xyz/2016/11/17/2016-11-17-adb/" data-id="cix4ic2za0002fpfu3wvrqk5y" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2016-10-12-my-five-arcticle" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/10/12/2016-10-12-my-five-arcticle/" class="article-date">
  <time datetime="2016-10-12T03:39:00.000Z" itemprop="datePublished">2016-10-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/12/2016-10-12-my-five-arcticle/">Android中常用的Gradle命令</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><p>本文中使用的是Gradle命令，已经添加将Gradle添加到了环境变量中。</p>
<p>0.查看Gradle版本<br><br><code>gradle --version</code></p>
<p>com.android.tools.build:gradle版本网址查看地址<br><br><a href="https://bintray.com/android/android-tools/com.android.tools.build.gradle" target="_blank" rel="external">https://bintray.com/android/android-tools/com.android.tools.build.gradle</a><br></p>
<p>其他的一些android tool版本分布查看网址<br><a href="https://bintray.com/android/android-tools/" target="_blank" rel="external">https://bintray.com/android/android-tools/</a><br></p>
<p>1.刷新Gradle缓存<br><br><a href="http:stackoverflow.com/questions/13565082/how-can-i-force-gradle-to-redownload-dependencies#" target="_blank" rel="external">force gradle to redownload dependencies</a><br></p>
<p>用于解决一些奇怪的依赖问题<br><br><code>gradle --refresh-dependencies</code></p>
<p><br><br>2.查看依赖关系<br>比如项目引用了很多库，这些库都依赖了okhttp,此时你又单独引入了okhttp后，此时存在多个okhttp的版本。<br><br>那么最后，这些库到底依赖或者说使用了哪个版本的okhttp呢？这个问题，在某些情况下，显得十分重要。<br></p>
<p>比如我在项目中使用了如下的库</p>
<blockquote>
<p>RxJava<br>compile ‘io.reactivex:rxandroid:1.2.1’<br>compile ‘io.reactivex:rxjava:1.1.10’  </p>
<p>Retrofit2<br>compile ‘com.squareup.retrofit2:retrofit:2.1.0’<br>compile ‘com.squareup.retrofit2:converter-gson:2.1.0’<br>compile ‘com.squareup.retrofit2:adapter-rxjava:2.1.0’  </p>
<p>OkHttp<br>compile ‘com.squareup.okhttp3:okhttp:3.4.1’  </p>
<p>logging-interceptor<br>debugCompile ‘com.squareup.okhttp3:logging-interceptor:3.4.1’  </p>
</blockquote>
<p>查看okhttp，在各个库的依赖中最后依赖的版本<br><br><code>gradle -q app:dependencyInsight --dependency okhttp --configuration compile</code></p>
<p><img src="http://ogxkun013.bkt.clouddn.com/okhttp.png" alt="okhttp"><br><br><br><br></p>
<p>查看rxjava，在各个库的依赖中最后依赖的版本<br><br><code>gradle -q app:dependencyInsight --dependency rxjava --configuration compile</code></p>
<p>查看support-annotations，在各个库的依赖中最后依赖的版本<br><br><code>gradle -q app:dependencyInsight --dependency com.android.support:support-annotations --configuration compile</code></p>
<p><img src="http://ogxkun013.bkt.clouddn.com/annotations.png" alt="annotations"></p>
<p>查看Android相关库的依赖关系<br><br><code>gradle androidDependencies</code></p>
<p>显示 task 使用细节执行<br><br><code>gradle -q help --task assemble</code></p>
<p>可以获取到 task 的详细信息， 或者多项目构建中相同 task 名称的所有 task 的信息<br></p>
<p>查看module相关库的依赖关系<br><br><code>gradle -q dependencies app:dependencie</code></p>
<p>查看某个Task的相关库的依赖关系<br><br><code>gradle -q dependencies app:dependencies --configuration compile</code></p>
<p>依赖报告<br><br><code>gradle projectReport</code><br>file:/home/malin/gitlab/bilibili/app/build/reports/project/dependencies/root.app.html<br></p>
<p>在浏览器中打开可以看到如下的网页，十分简介清楚。</p>
<p><img src="http://ogxkun013.bkt.clouddn.com/dependencies_one.png" alt="denpendencies1"><br><img src="http://ogxkun013.bkt.clouddn.com/dependencies_two.png" alt="denpendencies2"></p>
<blockquote>
<p>说明:这里需要在module中的buil.gradle中添加如下声明:<br><br><code>apply plugin: &#39;project-report&#39;</code></p>
</blockquote>
<p>禁止lint Task<br><br><code>gradle build -x lint</code></p>
<p>Task 编译耗时检测<br><br><code>gradle build --profile</code><br>file:/home/malin/gitlab/bilibili/build/reports/profile/<br></p>
<p>生成Gradle脚本<br><br><code>gradle init wrapper</code></p>
<p>lint<br><br><code>gradle lint</code><br>file:/home/malin/gitlab/bilibili/app/build/outputs/<br></p>
<p>项目结构<br><br><code>gradle project</code></p>
<p>显示依赖包的存储路径<br><br><code>gradle showMeCache</code></p>
<p>clean<br><br><code>gradle clean</code></p>
<p>打包<br><br><code>gradle assembleDebug --debug</code><br><code>gradle assembleRelease --info</code></p>
<p>打包并安装<br><br><code>gradle installDebug</code><br><br><code>gradle installRelease</code><br></p>
<p>获取APK包名<br><br>将<code>/sdk/build-tools/24.0.3/aapt</code>配置到环境变量中<br><br><code>aapt dump badging app.apk</code><br></p>
<p>grep过滤<br><br><code>aapt dump badging app.apk | grep package</code><br><br><code>aapt dump badging app.apk | grep uses-permission</code><br></p>
<p>查看权限<br><br><code>aapt dump permissions app.apk</code><br></p>
<p>查看资源列表<br><br><code>aapt dump resources app.apk</code><br></p>
<p>一般都会输出很多的信息，如要全部查看，请用下面这两句：<br><br><code>aapt dump resources app-xiaomi-debug.apk &gt; /home/malin/xxx/xxx.txt</code><br><br>这样会把所有的信息通过重定向符”&gt;”输出到sodino.txt文件中，然后再打开该文件即可查看。<br></p>
<p>查看apk配置信息<br><br>aapt dump configurations app.apk<br></p>
<p>查看指定apk的指定xml文件。<br><br><code>aapt dump xmltree app.apk res/layout/progress_dialog_layout.xml</code><br><br><code>aapt dump xmltree app.apk AndroidManifest.xml</code><br></p>
<p>应用的启动时间：<br><br><code>adb shell am start -W com.malin.animation/.mvp.MActivity</code><br></p>
<p>内存<br><br><code>adb shell dumpsys meminfo com.malin.animation</code><br></p>
<p>gradle编译工具的版本信息<br><br><code>gradle buildEnvironment</code><br></p>
<p>签名信息<br><br><code>gradle signingReport</code><br></p>
<p>Gradle GUI<br><br><code>gradle -gui</code><br></p>
<p>查看栈顶的Activity(包名)<br><br><code>adb shell dumpsys activity top | grep ACTIVITY</code><br><br><code>adb shell dumpsys activity | grep mFocusedActivity</code><br></p>
<p>查看安装应用的信息<br><br><code>adb shell dumpsys package com.malin.animation</code><br></p>
<p>查看安装应用的权限<br><br><code>adb shell dumpsys package com.malin.animation | grep permission</code><br></p>
<p>查看手机的屏幕信息<br><br><code>adb shell dumpsys display</code><br></p>
<p>查看手机分辨率<br><br><code>adb shell dumpsys display | grep DisplayInfo | grep app | grep width | grep height | grep real | grep mOverrideDisplayInfo</code><br></p>
<p>查看当前Activity的状态<br><br><code>adb shell dumpsys activity top</code><br></p>
<p>列出所有安装的应用的包名<br><br><code>adb shell pm list packages</code><br></p>
<p><code>adb shell screencap /sdcard/screen.png</code><br></p>
<p><code>adb shell am start -a android.intent.action.VIEW</code><br></p>
<p>启动一个Activity<br><br><code>adb shell am start -n com.malin.animation/.mvp.MActivity</code><br></p>
<p><code>adb shell am force-stop com.malin.animation</code><br></p>
<p>http:stormzhang.com/2016/09/08/common-adb-commands/<br></p>
<p>adb 命令大全<br><br>https:github.com/androidmalin/awesome-adb<br>http:adbshell.com/<br>https:developer.android.com/studio/command-line/shell.html</p>
<p><code>adb shell monkey -p com.malin.animation -v 100</code><br></p>
<p>屏幕分辨率<br><br><code>adb shell wm size</code><br></p>
<p>屏幕密度<br><br><code>adb shell wm density</code><br></p>
<p>屏幕分辨率和密度，虚拟按键的高度<br><br><code>adb shell dumpsys window displays | grep init</code><br></p>
<p><code>adb shell am start -W -S -R 9 -n com.malin.animation/.mvp.MActivity</code><br></p>
<p><code>adb shell am start -n com.malin.animation/.mvp.MActivity</code><br></p>
<p><code>adb shell screenrecord --bugreport /sdcard/a.mp4</code><br><br><code>adb shell screenrecord /sdcard/a.mp4</code><br><br><code>adb pull /sdcard/a.mp4 /home/malin/aaaa</code><br></p>
<p>monkey<br><br><code>adb shell monkey -p com.malin.animation -v 10000</code><br><br><code>adb shell monkey -p com.malin.animation -v -v -v --ignore-crashes --ignore-timeouts --monitor-native-crashes 100 &gt; d:\aaaa\a.txt</code><br></p>
<p>–ignore-crashes crash后继续<br><br> –ignore-timeouts ANR后继续<br><br> –monitor-native-crashes<br><br>–ignore-security-exceptions 权限问题后，继续<br></p>
<p>gradle文档<br><br>https:dongchuan.gitbooks.io/gradle-user-guide-/content/<br></p>
<p>即可看到所有依赖的对应路径，<br><br>Note : 因为 gradle 文件顺序执行的特点，这个任务应该定义在dependencies节点之下。<br><br><code>gradle showMeCache</code><br></p>
<p>离线模式编译<br><br><code>gradlew.bat build --offline -x lint</code><br></p>
<p>多命令顺序执行<br><br><code>gradlew.bat clean &amp; gradlew.bat showMeCache &amp; gradlew.bat build --offline -x lint</code></p>
<p>点击坐标点x=50  y=250的位置<br><br><code>adb shell input tap 50 250</code></p>
<blockquote>
<p>task showMeCache &lt;&lt; {<br>    configurations.compile.each { println it }<br>}</p>
</blockquote>
<p>自动化<br><br>光标切换到输入用户名<br><br><code>adb shell input tap 200 800</code><br></p>
<p>输入用户名<br><br><code>adb shell input text 15510600873</code><br></p>
<p>光标切换到输入密码<br><br><code>adb shell input tap 200 900</code><br></p>
<p>输入密码 abcd<br><br><code>adb shell input text abcdefgh</code><br></p>
<p>点击登陆<br><br><code>adb shell input tap 900 1200</code><br></p>
<p>点击返回键<br><br><code>adb shell input keyevent 4</code><br></p>
<p>自动化<br></p>
<blockquote>
<p>just for windows<br>task cleanall(type: Exec) {<br>    ext.lockhunter = ‘\”D:\LockHunter\LockHunter.exe\”‘<br>    def buildDir = file(new File(“build”))<br>    commandLine ‘cmd’, “$lockhunter”, ‘/delete’, ‘/silent’, buildDir<br>}</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.malin.xyz/2016/10/12/2016-10-12-my-five-arcticle/" data-id="cix4ic2ze0004fpfun8zpmann" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Ma-Lin-update/">Ma Lin update</a></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/12/25/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2016/12/22/2016-12-22-shell/">使用脚本安装并启动一个APK</a>
          </li>
        
          <li>
            <a href="/2016/12/18/2016-12-18-http/">Ubuntu修改Host不生效的问题</a>
          </li>
        
          <li>
            <a href="/2016/12/14/2016-12-14-host/">Ubuntu Http 请求</a>
          </li>
        
          <li>
            <a href="/2016/12/06/2016-12-06-unzip/">android使用tcpdump抓包</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 AndroidMaLin<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>